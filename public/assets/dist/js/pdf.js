/**
 * @licstart Ce qui suit est l'intégralité de l'avis de licence pour le
 * Code JavaScript dans cette page
 *
 * Copyright 2022 Fondation Mozilla
 *
 * Sous licence Apache, version 2.0 (la "Licence");
 * vous ne pouvez pas utiliser ce fichier sauf en conformité avec la licence.
 * Vous pouvez obtenir une copie de la licence sur
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Sauf si requis par la loi applicable ou convenu par écrit, le logiciel
 * distribué sous licence est distribué sur une BASE "TEL QUEL",
 * SANS GARANTIE OU CONDITION D'AUCUNE SORTE, expresse ou implicite.
 * Voir la licence pour les autorisations et les autorisations spécifiques à la langue
 * limitations en vertu de la licence.
 *
 * @licend Ce qui précède est l'intégralité de l'avis de licence pour le
 * Code JavaScript dans cette page
 */
!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pdfjs-dist/build /pdf",[],e):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=e():t["pdfjs-dist/build/pdf"]=t. pdfjsLib=e()}(this,(()=>(()=>{"use strict";var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule", {value:!0});e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e. PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag= e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0;e.arrayByteLength=arrayByteLength;e.arraysToBytes=fonction arraysToBytes(t){const e=t.length;if(1===e&&t[ 0]instanceof Uint8Array)return t[0];let s=0;for(let n=0;n<e;n++)s+=arrayByteLength(t[n]);let n=0;const r=new Uint8Array( s);for(let s=0;s<e;s++){let e=t[s];e instanceof Uint8Array||(e="string"==typeof e?stringToBytes(e):new Uint8Array(e ));const a=e.byteLength;r.set(e,n);n+=a}return r};e.assert=fonction assert(t,e){t||unreachable(e)};e.bytesToString=fonction bytesToString(t){"object"==typeof t&&null!==t&&void 0!==t.length||unreachable("Argument invalide pour bytesToString");const e=t.length,s=8192;if (e<s)return String.fromCharCode.apply(null,t);const n=[];for(let r=0;r<e;r+=s){const a=Math.min(r+s, e),i=t.subarray(r,a);n.push(String.fromCharCode.apply(null,i))}return n.join("")};e.createPromiseCapability=function createPromiseCapability(){const t=Object.create(null);let e=!1;Object.defineProperty(t,"settled",{get:()=>e});t.promise=new Promise((function(s,n) {t.resolve=function(t){e=!0;s(t)};t.reject=function(t){e=!0;n(t)}}));return t};e. createValidAbsoluteUrl=fonction createValidAbsoluteUrl(t,e=null,s=null){if(!t)return null;try{if(s&&"string"==typeof t){if(s.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e&&e.length>=2&&(t=`http://${t}`)}if(s.tryConvertEncoding) try{t=stringToUTF8String(t)}catch(t){}}const n=e?new URL(t,e):new URL(t);if(function _isValidProtocol(t){if(!t)return! 1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}} (n))return n}catch(t){}return null};e.escapeString=fonction escapeString(t){return t.replace(/([()\\\n\r])/g,(t =>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))};e.getModificationDate=fonction getModificationDate (t=nouvelle date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString( ).padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")} ; e.getVerbosityLevel=fonction getVerbosityLevel(){return r} ;e.info=fonction info(t){r>=n.INFOS&&console.log(`Info : ${t}`)};e.isArrayBuffer=fonction isArrayBuffer( t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength};e.isArrayEqual=function isArrayEqual(t,e){if(t.length!==e.length)return ! 1;for(let s=0,n=t.length;s<n;s++)if(t[s]!==e[s])return!1;return!0};e.isAscii=function isAscii (t){return/^[\x00-\x7F]*$/.test(t)};e.objectFromMap=fonction objectFromMap(t){const e=Object.create(null);for(const[s, n]de t)e[s]=n;retour e};e.objectSize=fonction objectSize(t){retour Object.keys(t).length};e.setVerbosityLevel=fonction setVerbosityLevel(t){Number.isInteger (t)&&(r=t)};e.shadow=ombre;e.string32=fonction string32(t){retour String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};e.stringToBytes =stringToBytes;e.stringToPDFString=fonction stringToPDFString(t){if(t[0]>="ï"){let e;"þ"===t[0]&&"ÿ"===t[1] ?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&& "»"===t[1]&&"¿"===t[2]&&(e="utf-8");if(e)try{const s=new TextDecoder(e,{fatal :! 0}),n=stringToBytes(t);return s.decode(n)}catch(t){warn(`stringToPDFString : "${t}".`)}}const e=[];for(let s =0,n=t.length;s<n;s++){const n=o[t.charCodeAt(s)];e.push(n?String.fromCharCode(n):t.charAt(s))} return e.join("")};e.stringToUTF16BEString=fonction stringToUTF16BEString(t){const e=["þÿ"];for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);e.push (String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return e.join("")};e.stringToUTF8String=stringToUTF8String;e.unreachable=unreachable;e.utf8StringToString=fonction utf8StringToString(t) {return unescape(encodeURIComponent(t))};e.warn=warn;s(2);e.IDENTITY_MATRIX=[1,0,0,1,0,0];e.FONT_IDENTITY_MATRIX=[.001,0, 0,.001,0,0];e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.AnnotationMode={DISABLE :0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY :2048};e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e .ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7, POLYLINE : 8, HIGHLIGHT : 9, UNDERLINE : 10, SQUIGGLY : 11, RAYÉ : 12, STAMP : 13, CARET : 14, INK : 15, POPUP : 16, FILEATTACHMENT : 17, SOUND : 18, MOVIE : 19, WIDGET : 20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationStateModelType={MARKED :"Marked",REVIEW :"Review"};e.AnnotationMarkedState={ MARKED :"Marqué",UNMARKED :"Non marqué"};e.AnnotationReviewState={ACCEPTED :"Accepted",REJECTED :"Rejected",CANCELLED :"Annulé",COMPLETED :"Completed",NONE :"Aucun"};e.AnnotationReplyType={GROUP :"Groupe",REPLY :"R"};e.AnnotationFlag={INVISIBLE :1,HIDDEN :2,PRINT :4,NOZOOM :8,NOROTATE :16,NOVIEW :32 ,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGPLETOOFF:16384,RADIO:32768 ,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864}; e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down ",U :"Mouse Up",Fo :"Focus",Bl :"Flou",PO :"PageOpen",PC :"PageClose",PV :"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Valider",C:"Calculer"};e.DocumentActionEventType={WC:"WillClose",WS:"WillSave" ,DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.PageActionEventType={O:"PageOpen",C:"PageClose"};e.StreamType={UNKNOWN :"UNKNOWN",FLATE :"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX :" RLX"};e.FontType={UNKNOWN :"UNKNOWN",TYPE1 :"TYPE1",TYPE1STANDARD :"TYPE1STANDARD",TYPE1C :"TYPE1C",CIDFONTTYPE0 :"CIDFONTTYPE0",CIDFONTTYPE0C :"CIDFONTTYPE0C",TRUETYPE :"TRUETYPE" ,CIDFONTTYPE2 :"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=n ;e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent : 7, setFlatness:8, setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19, trait:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText: 32, setCharSpacing:33, setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44, showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor: 58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70, endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject : 83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask ",shadingPattern :"shadingPattern",police :"police",errorTilingPattern :"errorTilingPattern",errorExtGState :"errorExtGState",errorXObject :"errorXObject",errorFontLoadType3 :"errorFontLoadType3",errorFontState :"errorFontState",errorFontMissing :"error",FontMissing :"error", errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function warn(t ){r>=n.WARNINGS&&console.log(`Warning : ${t}`)}function unreachable(t){throw new Error(t)}function shadow(t,e,s){Object.defineProperty(t, e,{value:s,enumerable:!0,configurable:!0,writable:!1});return s}const a=function BaseExceptionClosure(){function BaseException(t,e){this.constructor===BaseException&&unreachable ("Impossible d'initialiser BaseException.");this.message=t;this.name=e}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();e.BaseException=a;e.PasswordException=la classe PasswordException étend un{constructeur(t,e){super(t,"PasswordException");this.code=e}};e.UnknownErrorException=la classe UnknownErrorException étend un{constructeur(t,e){super(t ,"UnknownErrorException");this.details=e}};e.InvalidPDFException=classe InvalidPDFException étend un{constructeur(t){super(t,"InvalidPDFException")}};e.MissingPDFException=classe MissingPDFException étend un{constructeur( t){super(t,"MissingPDFException")}};e.UnexpectedResponseException=class UnexpectedResponseException étend un{constructor(t,e){super(t,"UnexpectedResponseException");this.status=e}};e.FormatError =classe FormatError étend un {constructeur(t){super(t,"FormatError")}} ;e.AbortException=la classe AbortException étend un{constructeur(t){super(t,"AbortException")}} ;function stringToBytes(t){"string"!=typeof t&&unreachable("Argument invalide pour stringToBytes");const e=t.length,s=new Uint8Array(e);for(let n=0;n<e;++ n)s[n]=255&t.charCodeAt(n);return s}function arrayByteLength(t){if(void 0!==t.length)return t.length;if(void 0!==t.byteLength) return t.byteLength;unreachable("Argument invalide pour arrayByteLength")}e.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const t=new Uint8Array(4) ;t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported( ){try{new Function("");return!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const i=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0 ")));class Util{static makeHexColor(t,e,s){return`#${i[t]}${i[e]}${i[s]}`}static scaleMinMax(t,e ){let s;if(t[0]){if(t[0]<0){s=e[0];e[0]=e[1];e[1]=s}e[0 ]*=t[0];e[1]*=t[0];if(t[3]<0){s=e[2];e[2]=e[3];e[3] =s}e[2]*=t[3];e[3]*=t[3]}autre{s=e[0];e[0]=e[2];e[2]=s ;s=e[1];e[1]=e[3];e[3]=s;if(t[1]<0){s=e[2];e[2]=e[3 ];e[3]=s}e[2]*=t[1];e[3]*=t[1];if(t[2]<0){s=e[0];e[ 0]=e[1];e[1]=s}e[0]*=t[2];e[1]*=t[2]}e[0]+=t[4];e[ 1]+=t[4] ;e[2]+=t[5] ;e[3]+=t[5]}transformation statique(t,e){retour[t[0]*e[0] +t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3] ,t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1] *e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2 ]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1 ]*e[2];retour[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3]) /s,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s]}statique getAxialAlignedBoundingBox(t,e){const s=Util.applyTransform(t,e),n=Util.applyTransform(t.slice(2,4),e),r=Util.applyTransform([t[0],t [3]],e),a=Util.applyTransform([t[2],t[1]],e);return[Math.min(s[0],n[0],r[0], a[0]),Math.min(s[1],n[1],r[1],a[1]),Math.max(s[0],n[0],r[0], a[0]),Math.max(s[1],n[1],r[1],a[1])]}transformation inverse statique(t){const e=t[0]*t[3] -t[1]*t[2];retour[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t [5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){ retour[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1 ]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2] *e[1]+t[3]*e[3],i=(s+a)/2,o=Math.sqrt((s+a)**2-4*(s*ar*n) )/2,l=i+o||1,c=io||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice( 0);si(t[0]>t[2]){e[0]=t[2];e[2]=t[0]}if(t[1]>t[3]){e [1]=t[3] ;e[3]=t[1]}retour e}intersection statique(t,e){const s=Math.max(Math.min(t[0],t[2] ),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[ 2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3]) ),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null :[s,r ,n,a]}static bezierBoundingBox(t,e,s,n,r,a,i,o){const l=[],c=[[],[]];let h,d,u,p ,f,g,m,_;for(let c=0;c<2;++c){if(0===c){d=6*t-12*s+6*r;h= -3*t+9*s-9*r+3*i;u=3*s-3*t}autrement{d=6*e-12*n+6*a;h=-3*e+ 9*n-9*a+3*o;u=3*n-3*e}if(Math.abs(h)<1e-12){if(Math.abs(d)<1e-12)continuer ;p=-u/d;0<p&&p<1&&l.push(p)}else{m=d*d-4*u*h;_=Math.sqrt(m);if(!(m<0)){f=(-d+ _)/(2*h);0<f&&f<1&&l.push(f);g=(-d-_)/(2*h);0<g&&g<1&&l.push(g)}}}let A ,b=l.length;const y=b;for(;b--;){p=l[b];A=1-p;c[0][b]=A*A*A*t+ 3*A*A*p*s+3*A*p*p*r+p*p*p*i;c[1][b]=A*A*A*e+3*A*A* p*n+3*A*p*p*a+p*p*p*o}c[0][y]=t;c[1][y]=e;c[0][y+1 ]=i;c[1][y+1]=o;c[0].length=c[1].length=y+2;return[Math.min(...c[0]),Math .min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}e.Util=Util;const o=[ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212, 8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];fonction stringToUTF8String(t){retour decodeURIComponent(escape(t))}},(t,e(s)=>{s) 3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.isNodeJS=void 0;const s=!("object"!=typeof process| |process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=s},(__unused_webpack_module,exports ,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports. PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory = exportations. _annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_require__(15),_optional_content_require__(15),_optional_content_require__(15),_optional_content_require__(15),_optional_content_require__(15),_optional_content_require__(15), =__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let ​​DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasplayFactory;let DefaultCMapReader=DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:s}=__w_pdfjs_require__(19); exports.DefaultCanvasFactory = DefaultCanvasFactory = t ; export. ("string"==typeof t||t instanceof URL)s={url:t};else if((0,_util.isArrayBuffer)(t))s={data:t};else if(t instanceof PDFDataRangeTransport )s={plage :t} ;else{if("object"!=typeof t)throw new Error("Paramètre non valide dans getDocument, besoin d'une chaîne, d'une URL, d'un Uint8Array ou d'un objet de paramètre.");if(!t.url&&!t.data&&!t. range)throw new Error("Objet paramètre non valide : besoin de .data, .range ou .url");s=t}const n=Object.create(null);let r=null,a=null;for(const t dans s){const e=s[t];switch(t){case"url":if("undefined"!=typeof window)try{n[t]=new URL(e,window.location). href;continue}catch(t){(0,_util.warn)(`Impossible de créer une URL valide : "${t}".`)}else if("string"==typeof e||e instanceof URL){ n[t]=e.toString();continue}throw new Error("Données d'URL PDF non valides : une chaîne ou un objet URL est attendu dans la propriété url.");case"range":r=e;continue; case"worker":a=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)n[t]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)n[t] =(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)( e))throw new Error("Données binaires PDF non valides : un tableau typé, une chaîne ou un objet de type tableau est attendu dans la propriété data.");n[t]=new Uint8Array(e)}else n[t] =new Uint8Array(e)}continue}n[t]=e}n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory;n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory;n.ignoreErrors=!0!==n.stopAtErrors ;n.fontExtraProperties=!0===n.fontExtraProperties;n.pdfBug=!0===n.pdfBug;n.enableXfa=!0===n.enableXfa;(!Number.isInteger(n.rangeChunkSize) ||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null);(!Number .isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1);"string"!=typeof n.cMapUrl&&(n.cMapUrl=null);"string"!=typeof n .standardFontDataUrl&&(n.standardFontDataUrl=null);"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof n .isEvalSupported&&(n.isEvalSupported=!0);"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS);"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace);"object"==typeof n.ownerDocument&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document);"boolean"!=typeof n .disableRange&&(n.disableRange=!1);"boolean"!=typeof n.disableStream&&(n.disableStream=!1);"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1);(0, _util.setVerbosityLevel)(n.verbosity);if(!a){const t={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};a=t.port?PDFWorker.fromPort(t):new PDFWorker (t);e._worker=a}const i=e.docId;a.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(a ,n,r,i),s=new Promise((function(t){let e;r?e=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},r):n.data||(e=createPDFNetworkStream({url:n.url,length:n [ t,s]).then((function([t,s]){if(e.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(i,t,a.port) ,o=new WorkerTransport(r,e,s,n);e._transport=o;r.send("Ready",null)}))})).catch(e._capability.reject);return e} fonction asynchrone _fetchDocument(t,e,s,n){if(t.destroyed)lancer une nouvelle erreur("Le travailleur a été détruit");if(s){e.length=s.length;e.initialData=s.initialData ;e.progressiveDone=s.progressiveDone;e.contentDispositionFilename=s.contentDispositionFilename}const r=wait t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.14.305",source :{data:e.data,url:e. url, mot de passe : e.password, disableAutoFetch : e.disableAutoFetch, rangeChunkSize : e.rangeChunkSize, length : e.length}, maxImageSize : e.maxImageSize, disableFontFace : e.disableFontFace, docBaseUrl : e.docBaseUrl, ignoreErrors : e.ignoreErrors ,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null}) ;if(t.destroyed)throw new Error("Le travailleur a été détruit");return r}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d"+PDFDocumentLoadingTask.#t++;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}obtenir la promesse (){return this._capability.promise}async destroy(){this.destroyed=!0;wait(this._transport?.destroy());this._transport=null;if(this._worker){this._worker .destroy();this._worker=null}}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,s=!1,n=null){this.length=t;this.initialData=e; this.progressiveDone=s;this.contentDispositionFilename=n;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability )()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s (t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const s of this._progressListeners)s(t,e)}))}onDataProgressiveRead(t) {this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{ for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Méthode abstraite PDFDataRangeTransport.requestDataRange" )}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t;this._transport=e;Object.defineProperty(this,"fingerprint",{get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, veuillez utiliser `PDFDocumentProxy.fingerprints` à la place.");return this.fingerprints[0]} });Object.defineProperty(this,"getStats",{value:async()=>{(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, veuillez utiliser le getter `PDFDocumentProxy.stats` à la place." );return this.stats||{streamTypes :{},fontTypes :{}}}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints( ){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t ){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){ renvoie ceci._transport.getPageLayout()}getPageMode(){renvoie ceci._transport.getPageMode()}getViewerPreferences(){renvoie ceci._transport.getViewerPreferences()}getOpenAction(){renvoie ceci._transport.getOpenAction()}getAttachments( ){renvoyez ceci._transport.getAttachments()}getJavaScript(){renvoyez ceci._transport.getJavaScript()}getJSActions(){renvoyez ceci._transport.getDocJSActions()}getOutline(){renvoyez ceci._transport.getOutline()} getOptionalContentConfig(){renvoyez ceci._transport.getOptionalContentConfig()}getPermissions(){renvoyez ceci._transport.getPermissions()}getMetadata(){renvoyez ceci._transport.getMetadata()}getMarkInfo(){renvoyez ceci._transport.getMarkInfo()}getData(){renvoie this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this. isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){this._transport.annotationStorage. size<=0&&(0,_display_utils.deprecated)("saveDocument appelé alors que `annotationStorage` est vide, veuillez utiliser la méthode getData à la place.");return this._transport.saveDocument()}getFieldObjects(){return this._transport .getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,s,n,r=!1){this._pageIndex=t;this._pageInfo=e;this._ownerDocument=n;this._transport=s;this._stats=r?new _display_utils.StatTimer:null;this._pdfBug =r;this.commonObjs=s.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this._annotationPromises= new Map;this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit() {return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r =!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t ="display"}={}){const e=this._transport.getRenderingIntent(t);let s=this._annotationPromises.get(e.cacheKey);if(!s){s=this._transport.getAnnotations(this._pageIndex,e.renderingIntent);this._annotationPromises.set(e.cacheKey,s);s=s.then ((t=>{for(const e of t){void 0!==e.titleObj&&Object.defineProperty(e,"title",{get(){(0,_display_utils.deprecated)("`title`-property sur l'annotation, veuillez utiliser `titleObj` à la place.");return e.titleObj.str}});void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get(){(0,_display_utils. obsolète)("propriété `contents` sur l'annotation, veuillez utiliser `contentsObj` à la place.");return e.contentsObj.str}})}return t}))}return s}getJSActions(){return this._jsActionsPromise| |=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:r=null,imageLayer:a=null,canvasFactory:i=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap : c=null,pageColors:h=null}){if(void 0!==arguments[0]?.renderInteractiveForms){(0,_display_utils.deprecated)("render n'accepte plus l'option `renderInteractiveForms`, veuillez utiliser l'option `annotationMode` à la place.");!0===arguments[0].renderInteractiveForms&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==arguments[0 ]?.includeAnnotationStorage){(0,_display_utils.deprecated)("le rendu n'accepte plus l'option `includeAnnotationStorage`, veuillez utiliser l'option `annotationMode` à la place.");!0===arguments[0].includeAnnotationStorage&&n ===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("Overall");const d=this._transport.getRenderingIntent(s,n);this.pendingCleanup=!1;l||(l =this._transport.getOptionalContentConfig());let u=this._intentStates.get(d.cacheKey);if(!u){u=Object.create(null);this._intentStates.set(d.cacheKey,u )}if(u.streamReaderCancelTimeout){clearTimeout(u.streamReaderCancelTimeout);u.streamReaderCancelTimeout=null}const p=i||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),f=!!(d.renderingIntent&_util.RenderingIntentFlag .PRINT);if(!u.displayReadyCapability){u.displayReadyCapability=(0,_util.createPromiseCapability)();u.operatorList={fnArray :[],argsArray :[],lastChunk :!1};this._stats&&this ._stats.time("Page Request");this._pumpOperatorList(d)}const complete=t=>{u.renderTasks.delete(g);(this.cleanupAfterRender||f)&&(this.pendingCleanup=!0);this._tryCleanup();if(t){g.capability.reject(t);this._abortOperatorList({intentState:u,reason:t instanceof Erreur ? t:new Error(t)})}else g.capability.resolve();if(this._stats){this._stats.timeEnd("Rendering");this._stats.timeEnd("Overall")}}, g=new InternalRenderTask({callback:complete,params:{canvasContext:t,viewport:e,transform:r,imageLayer:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c, operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:p,useRequestAnimationFrame:!f,pdfBug:this._pdfBug,pageColors:h});(u.renderTasks||=new Set).add(g);const m=g.task;Promise.all([u.displayReadyCapability.promise,l]).then((([t,e])=>{if(this.pendingCleanup)complete();else{this._stats&&this. _stats.time("Rendu");g.initializeGraphics({transparency:t,optionalContentConfig:e});g.operatorListChanged()}})).catch(complete);return m}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode. ENABLE}={}){const s=this._transport.getRenderingIntent(t,e,!0);let n,r=this._intentStates.get(s.cacheKey);if(!r){r=Object. create(null);this._intentStates.set(s.cacheKey,r)}if(!r.opListReadCapability){n=Object.create(null);n.operatorListChanged=fonction operatorListChanged(){if(r.operatorList. lastChunk){r.opListReadCapability.resolve(r.operatorList);r.renderTasks.delete(n)}};r.opListReadCapability=(0,_util.createPromiseCapability)();(r.renderTasks||=nouvel ensemble). add(n);r.operatorList={fnArray :[],argsArray :[],lastChunk :!1};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(s)}return r. opListReadCapability.promesse}streamTextContent({disableCombineTextItems :t=!1,includeMarkedContent :e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems :!0!= =t,includeMarkedContent:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)renvoie ceci. getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,s){const n=e.getReader( ),r={items :[],styles :Object.create(null)} ;!function pump(){n.read().then((function({value:e,done:s}){if( s)t(r);else{Object.assign(r.styles,e.styles);r.items.push(...e.items);pump()}}),s)}()}) )}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values()){this._abortOperatorList({intentState:e,reason:new Error("La page a été détruite."),force:!0});if(!e.opListReadCapability)for(const s of e. renderTasks){t.push(s.completed);s.cancel()}}this.objs.clear();for(const t of this._bitmaps)t.close();this._bitmaps.clear(); this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(t)}cleanup(t=!1){this.pendingCleanup=!0; return this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if( t.size>0||!e.lastChunk)return!1;this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise= null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();this._bitmaps.clear();this.pendingCleanup=!1;return!0}_startRenderPage(t,e){const s=this._intentStates.get( e);if(s){this._stats&&this._stats.timeEnd("Page Request");s.displayReadyCapability&&s.displayReadyCapability.resolve(t)}}_renderPageChunk(t,e){for(let s=0,n= t.length;s<n;s++){e.operatorList.fnArray.push(t.fnArray[s]);e.operatorList.argsArray.push(t.argsArray[s])}e.operatorList.lastChunk=t .lastChunk;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e}){const s=this._transport.messageHandler.sendWithStream( "GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:t&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),n=this._intentStates.get(e);n.streamReader=s;const pump=()=>{s.read().then((({value:t, done:e})=>{if(e)n.streamReader=null;else if(!this._transport.destroyed){this._renderPageChunk(t,n);pump()}}),(t=>{ n.streamReader=null;if(!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(const t of n.renderTasks)t.operatorListChanged();this._tryCleanup ()}if(n.displayReadyCapability)n.displayReadyCapability.reject(t);else{if(!n.opListReadCapability)throw t;n.opListReadCapability.reject(t)}}}))};pump()}_abortOperatorList ({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(!s){if(t.renderTasks.size>0)return;if(e instanceof _display_utils. RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:e,force:!0});t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{}));t.streamReader=null;if(! this._transport.destroyed){for(const[e,s]of this._intentStates)if(s===t){this._intentStates.delete(e);break}this.cleanup()}}}obtenir des statistiques (){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[];this._deferred=Promise.resolve()}postMessage(t,e){const s={ data:structuredClone(t,e)};this._deferred.then((()=>{for(const t of this._listeners)t.call(this,s)}))}addEventListener(t,e){ this._listeners.push(e)}removeEventListener(t,e){const s=this._listeners.indexOf(e);this._listeners.splice(s,1)}terminate(){this._listeners.length=0 }}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled :!1,fallbackWorkerSrc :null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if(" object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*) ? $/i,"".worker$1$2"))}PDFWorkerUtil.isSameOrigin=fonction(t,e){let s;try{s=new URL(t);if(!s.origin||"null"== =s.origin)return!1}catch(t){return!1}const n=new URL(e,s);return s.origin===n.origin};PDFWorkerUtil.createCDNWrapper=function(t){ const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#e=new WeakMap;constructor({name:t=null, port :e=null,verbosité :s=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#e.has(e))throw new Error("Impossible d'utiliser plus d'un PDFWorker par port.");this.name=t;this.destroyed=!1;this.verbosity=s;this._readyCapability=(0 ,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(e){PDFWorker.#e.set(e,this);this._initializeFromPort(e)} sinon this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t ; this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}_initialize() {if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let t=PDFWorker.workerSrc;essayez{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),s=new _message_handler .MessageHandler("main","worker",e),terminateEarly=()=>{e.removeEventListener("error",onWorkerError);s.destroy();e.terminate();this.destroyed?this. _readyCapability.reject(new Error("Le travailleur a été détruit")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};e.addEventListener("error",onWorkerError); s.on("test",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else if(t){this._messageHandler=s;this._port= e;this._webWorker=e;this._readyCapability.resolve();s.send("configure",{verbosity:this.verbosity})}else{this._setupFakeWorker();s.destroy();e.terminate()}}));s.on("ready",(t=>{e.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();autrement, essayez {sendTest()}catch(t){this._setupFakeWorker()}}));const sendTest=()=>{const t=new Uint8Array;s.send("test",t,[t.buffer]) };sendTest();return}catch(t){(0,_util.info)("Le travailleur a été désactivé.")}}this._setupFakeWorker()}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){ (0,_util.warn)("Configuration d'un faux travailleur.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed){this._readyCapability.reject(new Error ("Le travailleur a été détruit"));return}const e=new LoopbackPort;this._port=e;const s="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(s+"_worker",s,e) ;t.setup(n,e);const r=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=r;this._readyCapability.resolve();r.send("configure",{verbosity:this.verbosity})}) ).catch((t=>{this._readyCapability.reject(new Error(`La configuration du faux travailleur a échoué : "${t.message}".`))}))}destroy(){this.destroyed=! 0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}PDFWorker.#e.delete(this._port);this._port=null;if(this._messageHandler){this. _messageHandler.destroy();this._messageHandler=null}}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#e.has (t.port)?this.#e.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!= =PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('Aucun "GlobalWorkerOptions.workerSrc" spécifié.');return PDFWorkerUtil.fallbackWorkerSrc}lancer une nouvelle erreur('Aucun "GlobalWorkerOptions.workerSrc" spécifié.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if (mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}wait(0,_display_utils.loadScript)(this .workerSrc);return window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, veuillez utiliser `PDFWorker .workerSrc` à la place.");return this.workerSrc};class WorkerTransport{#s=null;#n=new Map;#r=new Map;#a=null;constructor(t,e,s,n){ this.messageHandler=t;this.loadingTask=e;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n. ownerDocument,styleElement:n.styleElement});this._params=n;if(!n.useWorkerFetch){this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked});this. StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=s;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}get annotationStorage(){retour (0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#s}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,s=!1){let n=_util.RenderingIntentFlag.DISPLAY,r="";switch(t){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag .PRINT;break;default:(0,_util.warn)(`getRenderingIntent - intention invalide : ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break; cas _util.AnnotationMode.ENABLE:break;cas _util.AnnotationMode.ENABLE_FORMS :n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;r=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - annotationMode invalide : ${e}`)}s&&(n+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:n,cacheKey:`${n}_${r}`}}destroy(){if(this.destroyCapability) return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Le travailleur a été détruit lors du rappel onPassword")); const t=[];for(const e of this.#n.values())t.push(e._destroy());this.#n.clear();this.#r.clear();this .hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);t.push(e);Promise.all(t).then((()=>{this.commonObjs.clear();this.fontLoader.clear();this .#a=null;this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Le travailleur a été arrêté."));if(this.messageHandler){this.messageHandler .destroy();this.messageHandler=null}this.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}= this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - aucune instance `IPDFStream` disponible.");this._fullReader=this. _networkStream.getFullReader();this._fullReader.onProgress=t=>{this._lastProgress={loaded :t.loaded,total:t.total}};e.onPull=()=>{this._fullReader.read().then((function({value:t,done:s}){if(s)e.close ();else{(0,_util.assert)((0,_util.isArrayBuffer)(t);"GetReader - attend un ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t]) }})).catch((t=>{e.error(t)}))};e.onCancel=t=>{this._fullReader.cancel(t);e.ready.catch((t=> {if(!this.destroyed)throw t}))}}));t.on("ReaderHeadersReady",(t=>{const s=(0,_util.createPromiseCapability)(),n=this._fullReader ; n.headersReady.then((()=>{if(!n.isStreamingSupported||!n.isRangeSupported){this._lastProgress&&e.onProgress?.(this._lastProgress);n.onProgress=t=>{e.onProgress ?.({loaded:t.loaded,total:t.total})}}s.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),s.reject) ;retourne à la promesse}));t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - aucune instance `IPDFStream` disponible.");const s=this._networkStream.getRangeReader(t .begin,t.end);if(s){e.onPull=()=>{s.read().then((function({value:t,done:s}){if(s)e. close();else{(0,_util.assert)((0,_util.isArrayBuffer)(t)("GetRangeReader - attend un ArrayBuffer.");e.enqueue(new Uint8Array(t),1,[t] )}})).catch((t=>{e.error(t)}))};e.onCancel=t=>{s.cancel(t);e.ready.catch((t=>{ if(!this.destroyed)throw t}))}}else e.close()}));t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages ;this._htmlForXfa=t.htmlForXfa;delete t.htmlForXfa;e._capability.resolve(new PDFDocumentProxy(t,this))}));t.on("DocException",(function(t){let s;switch (t.name){case"PasswordException":s=nouveau _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":s=new _util.MissingPDFException(t.message);break ;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(t.message,t.details);break;default:( 0,_util.unreachable)("DocException - une erreur valide est attendue.")}e._capability.reject(s)}));t.on("PasswordRequest",(t=>{this._passwordCapability=(0, _util.createPromiseCapability)();if(e.onPassword){const updatePassword=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{ e.onPassword(updatePassword,t.code)}catch(t){this._passwordCapability.rejeter(t)}}autrement ceci._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}));t.on("DataLoaded",(t=> {e.onProgress?.({loaded:t.length,total:t.length});this.downloadInfoCapability.resolve(t)}));t.on("StartRenderPage",(t=>{if(this .destroyed)return;this.#n.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}));t.on("commonobj",(([e,s,n])= >{if(!this.destroyed&&!this.commonObjs.has(e))switch(s){case"Font":const r=this._params;if("error"in n){const t=n.error ;(0,_util.warn)(`Erreur lors du chargement de la police : ${t}`);this.commonObjs.resolve(e,t);break}let a=null;r.pdfBug&&globalThis.FontInspector?.enabled&&(a ={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const i=new _font_loader.FontFaceObject(n,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(i).catch((s= >t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!r.fontExtraProperties&&i.data&&(i.data=null);this.commonObjs.resolve(e,i) }));break;case"FontPath":case"Image":this.commonObjs.resolve(e,n);break;default:throw new Error(`Vous avez un type d'objet commun inconnu ${s}`)}}) );t.on("obj",(([t,e,s,n])=>{if(this.destroyed)return;const r=this.#n.get(e);if(!r .objs.has(t))switch(s){case"Image":r.objs.resolve(t,n);const e=8e6;if(n){let t;if(n.bitmap){const {bitmap:e,width:s,height:a}=n;t=s*a*4;r._bitmaps.add(e)}else t=n.data?.length||0;t>e&&( r.cleanupAfterRender=!0)}break ;case"Pattern":r.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${s}`)}}));t.on("DocProgress",(t =>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})}));t.on("DocStats",(t=>{this.destroyed|| (this.#s=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))}));t.on("UnsupportedFeature",this._onUnsupportedFeature .bind(this));t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Le travailleur a été détruit.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t ):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))));t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error( "L'ouvrier a été détruit.")):ceci.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:t}){this.destroyed|| this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0| |t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#r.get(e);if(s)return s; const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroy");const s=new PDFPageProxy(e ,t,this,this._params.ownerDocument,this._params.pdfBug);this.#n.set(e,s);return s}));this.#r.set(e,n);return n }getPageIndex(t){retour"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0 ? Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this .messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages, annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise| |=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t ){return"string" !=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this .messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences( ){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions() {return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise( "GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(( t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#a||=this.messageHandler.sendWithPromise("GetMetadata",null).then((t=>({info:t[0],metadata :t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo() {return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){wait this.messageHandler.sendWithPromise("Cleanup",null);if(!this.destroyed){for(const t of this.#n.values()){if(!t.cleanup())throw new Error(`startCleanup : La page ${t.pageNumber} est en cours de rendu.`)}this.commonObjs.clear();t ||this.fontLoader.clear();this.#a=null;this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow) (cette,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}class PDFObjects{#i=Object.create(null);#o(t){const e=this.#i[t] ; return e||(this.#i[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,e=null){if(e){const s=this .#o(t);s.capability.promise.then((()=>e(s.data)));return null}const s=this.#i[t];if(!s?.capability .settled)throw new Error(`Demande d'un objet qui n'est pas encore résolu ${t}.`);return s.data}has(t){return this.#i[t]?.capability.settled||! 1}resolve(t,e=null){const s=this.#o(t);s.data=e;s.capability.resolve()}clear(){this.#i=Object.create(null )}}class RenderTask{constructor(t){this._internalRenderTask=t;this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}} exports.RenderTask=RenderTask ;class InternalRenderTask{static#l=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:i,canvasFactory:o,useRequestAnimationFrame:l=! 1,pdfBug:c=!1,pageColors:h=null}){this.callback=t;this.params=e;this.objs=s;this.commonObjs=n;this.annotationCanvasMap=r;this.operatorListIdx =null;this.operatorList=a;this._pageIndex=i;this.canvasFactory=o;this._pdfBug=c;this.pageColors=h;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady= !1;this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this );this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=e.canvasContext.canvas}obtenir terminé(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig : e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#l.has(this._canvas))throw new Error("Impossible d'utiliser le même canevas pendant plusieurs opérations de rendu(). Utilisez un canevas différent ou assurez-vous que les opérations précédentes ont été annulées ou terminées.");InternalRenderTask.#l.add(this._canvas)}if(this._pdfBug&&globalThis.StepperManager?.enabled){this.stepper=globalThis.StepperManager.create(this ._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}const{canvasContext:s,viewport:n,transform:r,imageLayer:a,background:i }=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,a,e,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:i});this.operatorListIdx=0;this.graphicsReady= !0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}annuler(t=null){this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&InternalRenderTask.#l.delete (this._canvas);this.callback(t||new _display_utils.RenderingCancelledException(`Rendu annulé, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(this.graphicsReady){ this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0 ;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve(). then(this._nextBound).catch(this._cancelBound)}async _next(){if(!this.cancelled){this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this .stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&InternalRenderTask.# l.delete(this._canvas);this.callback()}}}}}const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(t ,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0;e.deprecated=fonction obsolète(t){console.log("Utilisation API obsolète : "+t)} ; e.getFilenameFromUrl=fonction getFilenameFromUrl(t){const e=t.indexOf("#"),s=t.indexOf("?"),n=Math.min(e>0?e:t.length,s >0?s:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)};e.getPdfFilenameFromUrl=fonction getPdfFilenameFromUrl(t,e="document.pdf"){ if("string"!=typeof t)return e;if(isDataScheme(t)){(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance.');return e}const s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/ \/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let a=s.exec(n[ 1])||s.exec(n[2])||s.exec(n[3]);if(a){a=a[0];if(a.includes("%"))try{a=s.exec(decodeURIComponent(a))[0]}catch(t){}}return a||e};e.getXfaPageViewport=function getXfaPageViewport(t,{scale : e=1,rotation:s=0}){const{width:n,height:r}=t.attributes.style,a=[0,0,parseInt(n),parseInt(r)] ; renvoie la nouvelle PageViewport ({viewBox:a,scale:e,rotation:s})};e.isDataScheme=isDataScheme;e.isPdfFile=fonction isPdfFile(t){return"string"==typeof t&&/\.pdf$/i.test (t)};e.isValidFetchUrl=isValidFetchUrl;e.loadScript=fonction loadScript(t,e=!1){return new Promise(((s,n)=>{const r=document.createElement("script") ;r.src=t;r.onload=function(t){e&&r.remove();s(t)};r.onerror=function(){n(new Error(`Impossible de charger le script à : ${r .src}`))};(document.head||document.documentElement).appendChild(r)}))};var n=s(6),r=s(1);class PixelsPerInch{static CSS=96 ;PDF statique=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=PixelsPerInch;la classe DOMCanvasFactory étend n.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super();this._document=t} _createCanvas(t,e){const s=this._document.createElement("canvas");s.width=t;s.height=e;return s}}e.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(t,e =!1){if(isValidFetchUrl(t,document.baseURI)){const s=wait fetch(t);if(!s.ok)throw new Error(s.statusText);return e?new Uint8Array(wait s .arrayBuffer()):(0,r.stringToBytes)(wait s.text())}return new Promise(((s,n)=>{const a=new XMLHttpRequest;a.open("GET",t ,!0);e&&(a.responseType="arraybuffer");a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0 ===a.status){let t;e&&a.response?t=new Uint8Array(a.response):!e&&a.responseText&&(t=(0,r.stringToBytes)(a.responseText));if(t){s(t);return}}n(new Error(a.statusText))}};a.send (null)}))}la classe DOMCMapReaderFactory étend n.BaseCMapReaderFactory{_fetchData(t,e){return fetchData(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e}))) }}e.DOMCMapReaderFactory=DOMCMapReaderFactory;la classe DOMStandardFontDataFactory étend n.BaseStandardFontDataFactory{_fetchData(t){return fetchData(t,!0)}}e.DOMStandardFontDataFactory=DOMStandardFontDataFactory;la classe DOMSVGFactory étend n.BaseSVGFactory{_createSVG(t){return document .createElementNS("http://www.w3.org/2000/svg",t)}}e.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor({viewBox:t,scale:e,rotation:s,offsetX:n =0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t;this.scale=e;this.rotation=s;this.offsetX=n;this.offsetY=r;const i=(t[2]+t[0])/2,o=(t[3]+t[1])/2 ; soit l,c,h,d,u,p,f,g ; (s%=360)<0&&(s+=360);interrupteur(s){case 180:l=-1;c=0;h=0;d=1;break;case 90:l=0;c= 1;h=1;d=0;break;cas 270:l=0;c=-1;h=-1;d=0;break;cas 0:l=1;c=0;h=0; d=-1;break;default:throw new Error("PageViewport : rotation non valide, doit être un multiple de 90 degrés.")}if(a){h=-h;d=-d}if(0== =l){u=Math.abs(ot[1])*e+n;p=Math.abs(it[0])*e+r;f=Math.abs(t[3]-t[1 ])*e;g=Math.abs(t[2]-t[0])*e}else{u=Math.abs(it[0])*e+n;p=Math.abs(ot[ 1])*e+r;f=Math.abs(t[2]-t[0])*e;g=Math.abs(t[3]-t[1])*e}this.transform= [l*e,c*e,h*e,d*e,ul*e*ih*e*o,pc*e*id*e*o];this.width=f;this.height=g} clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new PageViewport ({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip :r})}convertToViewportPoint(t,e){return r.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=r.Util.applyTransform([t[0],t [1]],this.transform),s=r.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0 ],s[1]]}convertToPdfPoint(t,e){return r.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=PageViewport;class RenderingCancelledException étend r.BaseException{constructor(t ,e){super(t,"RenderingCancelledException");this.type=e}}e.RenderingCancelledException=RenderingCancelledException;function isDataScheme(t){const e=t.length;let s=0;for(;s<e&& ""===t[s].trim();)s++;return"data:"===t.substring(s,s+5).toLowerCase()}e.StatTimer=class StatTimer{constructor() {this.started=Object.create(null);this.times=[]}time(t){t in this.started&&(0,r.warn)(`Timer est déjà en cours d'exécution pour ${t}`);this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,r.warn)(` Le minuteur n'a pas démarré depuis ${t}`);this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t] }toString(){const t=[];let e=0;for(const t of this.times){const s=t.name;s.length>e&&(e=s.length)}for(const s of this.times){const n=s.end-s.start;t.push(`${s.name.padEnd(e)} ${n}ms\n`)}return t.join("" )}} ;fonction isValidFetchUrl(t,e){try{const{protocol:s}=e?new URL(t,e):new URL(t);return"http:"===s||"https :"===s}catch(t){return!1}}let a;e.PDFDateString=class PDFDateString{static toDateObject(t){if(!t||"string"!=typeof t)return null ; a||(a=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\ \d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?") );const e=a.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n <=12?n-1:0;let ​​r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let i=parseInt(e[4],10); i=i>=0&&i<=23?i:0;let ​​o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let ​​l=parseInt(e[6] ,10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h <=23?h:0;let ​​d=parseInt(e[9],10)||0;d=d>=0&&d<=59?d:0;if("-"===c){i+ =h;o+=d}else if("+"===c){i-=h;o-=d}return new Date(Date.UTC(s,n,r,i,o,l)) }}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0 ;var n=s(1);classe BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,n.unreachable)("Impossible d'initialiser BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Taille de toile non valide");const s =this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d")}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas n'est pas spécifié");if(e<=0||s<=0)throw new Error("Taille de canevas invalide");t.canvas.width=e;t.canvas.height=s}destroy(t) {if(!t.canvas)lancer une nouvelle erreur("Le canevas n'est pas spécifié");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}_createCanvas( t,e){(0,n.unreachable)("Méthode abstraite `_createCanvas` appelée.")}}e.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!1} ){this.constructor===BaseCMapReaderFactory&&(0,n.unreachable)("Impossible d'initialiser BaseCMapReaderFactory.");this.baseUrl=t;this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('Le paramètre CMap "baseUrl" doit être spécifié , assurez-vous que les paramètres API "cMapUrl" et "cMapPacked" sont fournis.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed ?".bcmap":""),s=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(e,s).catch((t=>{throw new Error(` Impossible de charger ${this.isCompressed?"binary ":""}CMap à : ${e}`)}))}_fetchData(t,e){(0,n.unreachable)("Méthode abstraite `_fetchData` appelé.")}}e.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.constructor===BaseStandardFontDataFactory&&(0,n.unreachable)("Impossible d'initialiser BaseStandardFontDataFactory.");this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The Le paramètre "baseUrl" de la police standard doit être spécifié, assurez-vous que le paramètre API "standardFontDataUrl" est fourni.');if(!t)throw new Error("Le nom de fichier de la police doit être spécifié.");const e=`${this .baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t) {(0,n.unreachable)("Méthode abstraite `_fetchData` appelée.")}}e.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,n.unreachable)(" Impossible d'initialiser BaseSVGFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Dimensions SVG invalides");const s=this._createSVG("svg:svg");s.setAttribute("verinaccessible)("Méthode abstraite `_prepareFontLoadEvent`.")}}let r;e.FontLoader=r;e.FontLoader=r=class GenericFontLoader étend BaseFontLoader{constructor(t){super(t);this.loadingContext={requests :[],nextRequestId :0};this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{/Mozilla\/5.0.* ?rv:(\d+).*? Gecko/.exec(navigator.userAgent) ?.[1]>=14&&(t=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e= this.loadingContext,s={id:"pdfjs-font-loading-"+e.nextRequestId++,done:!1,complete:function completeRequest(){(0,n.assert)(!s.done,"completeRequest( ) ne peut pas être appelé deux fois.");s.done=!0;for(;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t .rappel,0)}},rappel :t} ;,s=this.sourceName,r=t.sourceName,a=this.comObj,f=this.streamControllers[e],g=this.streamSinks[e];switch(t.stream){case p:t.success ?f.startCall.resolve():f.startCall.reject(wrapReason(t.reason));break;cas u:t.success?f.pullCall.resolve():f.pullCall.reject(wrapReason(t. raison));break;case d:if(!g){a.postMessage({sourceName:s,targetName:r,stream:u,streamId:e,success:!0});break}g.desiredSize<= 0&&t.desiredSize>0&&g.sinkCapability.resolve();g.desiredSize=t.desiredSize;new Promise((function(t){t(g.onPull&&g.onPull())})).then((function(){ a.postMessage({sourceName:s,targetName:r,stream:u,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:s,targetName:r,stream :u,streamId:e,reason:wrapReason(t)})}));break;case c:(0,n.assert)(f,"la mise en file d'attente doit avoir un contrôleur de flux");if(f.isClosed)break ;f.contrôleur.enqueue(t.chunk);break;case l:(0,n.assert)(f,"close devrait avoir un contrôleur de flux");if(f.isClosed)break;f.isClosed=!0;f.controller. close();this._deleteStreamController(f,e);break;case h:(0,n.assert)(f,"error should have stream controller");f.controller.error(wrapReason(t.reason)) ;this._deleteStreamController(f,e);break;case o:t.success?f.cancelCall.resolve():f.cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(f,e); break;case i:if(!g)break;new Promise((function(e){e(g.onCancel&&g.onCancel(wrapReason(t.reason)))})).then((function(){a. postMessage({sourceName:s,targetName:r,stream:o,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:s,targetName:r,stream:o ,streamId:e,reason:wrapReason(t)})}));g.sinkCapability.reject(wrapReason(t.reason));g.isCancelled=!0;delete this.streamSinks[e];break;par défaut : jeter une nouvelle erreur ("cas de flux inattendu")}}async _deleteStreamController(t,e){wait Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall. promesse]);supprimer this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,s)=>{Object.defineProperty(e, "__esModule",{value :!0});e.Metadata=void 0;var n=s(1);e.Metadata=class Metadata{#c;#h;constructor({parsedData:t,rawData:e }){this.#c=t;this.#h=e}getRaw(){renvoie ceci.#h}get(t){renvoie ceci.#c.get(t)??null}getAll(){ return(0,n.objectFromMap)(this.#c)}has(t){return this.#c.has(t)}}},(t,e,s)=>{Object.defineProperty(e, "__esModule",{value :!0});e.OptionalContentConfig=void 0;var n=s(1);class OptionalContentGroup{constructor(t,e){this.visible=!0;this.name=t;this.intent=e}}e.OptionalContentConfig=class OptionalContentConfig{constructor(t){this.name=null;this.creator=null;this._order=null;this. _groups=new Map;if(null!==t){this.name=t.name;this.creator=t.creator;this._order=t.order;for(const e of t.groups)this._groups .set(e.id,new OptionalContentGroup(e.name,e.intent));if("OFF"===t.baseState)for(const t of this._groups)t.visible=!1;for( const e de t.on)this._groups.get(e).visible=!0;for(const e de t.off)this._groups.get(e).visible=!1}}_evaluateVisibilityExpression(t){ const e=t.length;if(e<2)return!0;const s=t[0];for(let r=1;r<e;r++){const e=t[r];let a; if(Array.isArray(e))a=this._evaluateVisibilityExpression(e);else{if(!this._groups.has(e)){(0,n.warn)(`Groupe de contenu facultatif introuvable : ${ e}`);return!0}a=this._groups.get(e).visible}commutateur(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===s}isVisible( t){if(0===this._groups.size)return!0;if(!t){(0,n.warn)("Groupe de contenu facultatif non défini.");return!0}if(" OCG"===t.type){if(!this._groups.has(t.id)){(0,n.warn)(`Groupe de contenu facultatif introuvable : ${t.id}`);return !0}return this._groups.get(t.id).visible}if("OCMD"===t.type){if(t.expression)return this._evaluateVisibilityExpression(t.expression);if(!t .policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this._groups.has(e)){(0,n.warn)(`Groupe de contenu facultatif introuvable : ${e}`);return!0}if(this._groups.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for( const e of t.ids){if(!this._groups.has(e)){(0,n.warn)(`Groupe de contenu facultatif introuvable : ${e}`);return !0}if(!this._groups.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(! this._groups.has(e)){(0,n.warn)(`Groupe de contenu facultatif introuvable : ${e}`);return!0}if(!this._groups.get(e).visible) return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this._groups.has(e)){(0,n.warn )(`Groupe de contenu facultatif introuvable : ${e}`);return!0}if(this._groups.get(e).visible)return!1}return!0}(0,n.warn)(` Politique de contenu facultatif inconnue ${t.policy}.`);return!0}(0,n.warn)(`Type de groupe inconnu ${t.type}.`);return!0}setVisibility(t,e= !0){this._groups.has(t)?this._groups.get(t).visible=!!e:(0,n.warn)(`Groupe de contenu facultatif introuvable : ${t}`)} getOrder(){renvoie this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0 ?(0,n.objectFromMap)(this._groups):null}getGroup(t){return this._groups.get(t)||null}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:! 0});e.PDFDataTransportStream=void 0;var n=s(1),r=s(5);e.PDFDataTransportStream=class PDFDataTransportStream{constructor(t,e){(0,n.assert)(e, 'PDFDataTransportStream - argument "pdfDataRangeTransport" requis manquant.');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;const s=t.initialData; if(s?.length>0){const t=new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=! t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})}));this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})}));this ._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady ()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push (e);else{const s=this._rangeReaders.some((function(s){if(s._begin!==t.begin)return!1;s._enqueue(e);return!0})) ;(0,n.assert)(s,"_onReceiveData - aucune instance `PDFDataTransportStreamRangeReader` trouvée.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){if(void 0 ===t.total){const e=this._rangeReaders[0];e?.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e?.onProgress&&e.onProgress({loaded:t. chargé, total : t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e >=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader ne peut être appelé qu'une seule fois.");const t=this._queuedChunks; this._queuedChunks=null;return new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new PDFDataTransportStreamRangeReader(this, t,e);ceci._pdfDataRangeTransport.requestDataRange(t,e);this._rangeReaders.push(s);return s}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const e of this._rangeReaders.slice(0) )e.cancel(t);this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(t,e,s=!1,n=null){this._stream=t;this._done=s|| !1;this._filename=(0,r.isPdfFile)(n)?n:null;this._queuedChunks=e||[];this._loaded=0;for(const t of this._queuedChunks)this._loaded+ =t.byteLength;this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_enqueue(t){if(!this._done){if(this ._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}autrement ceci._queuedChunks.push(t);this._loaded+=t.byteLength}}obtenir headersReady(){renvoie ceci._headersReady}get filename(){renvoie ceci._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length >0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability )();this._requests.push(t);return t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done :!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,s){this._stream=t ;this._begin=e;this._end=s;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_enqueue(t){if(!this._done ){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this. _done=!0;this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;this._queuedChunk=null;return {value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,n.createPromiseCapability)();this._requests.push(t );return t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length =0;this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.XfaText=void 0;class XfaText {static textContent(t){const e=[],s={items:e,styles:Object.create(null)} ;!function walk(t){if(!t)return ;let s=null;const n=t.name;if("#text"===n)s=t.value;else{if(!XfaText.shouldBuildText(n))return;t?.attributes?.textContent?s=t.attributes.textContent:t.value&&(s=t.value)}null !==s&&e.push({ str:s});if(t.children)for(const e of t.children)walk(e)}(t);return s}static shouldBuildText(t){return!("textarea"===t| |"input"===t||"option"===t||"select"===t)}}e.XfaText=XfaText},(t,e,s)=>{Object.defineProperty( e,"__esModule",{value :!0});e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(6);const fetchData=function(t){return new Promise(( (e,s)=>{require("fs").readFile(t,((t,n)=>{!t&&n?e(new Uint8Array(n)):s(new Error(t))}) )}))} ; la classe NodeCanvasFactory étend n.BaseCanvasFactory{_createCanvas(t,e){return require("canvas").createCanvas(t,e)}}e.NodeCanvasFactory=NodeCanvasFactory; la classe NodeCMapReaderFactory étend n.BaseCMapReaderFactory{_fetchData(t,e){return fetchData(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=NodeCMapReaderFactory ;class NodeStandardFontDataFactory étend n.BaseStandardFontDataFactory{_fetchData(t){return fetchData(t)}}e.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value : !0});e.AnnotationLayer=void 0;var n=s(1),r=s(5),a=s(8),i=s(21),o=s(22);const l =1e3,c=nouveau WeakSet;fonction getRectDims(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class AnnotationElementFactory{static create(t){ switch(t.data.annotationType){case n.AnnotationType.LINK:return new LinkAnnotationElement(t);case n.AnnotationType.TEXT:return new TextAnnotationElement(t);case n.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t) :new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case n.AnnotationType.POPUP:return new PopupAnnotationElement(t);case n.AnnotationType.FREETEXT:return new FreeTextAnnotationElement (t);cas n.AnnotationType.LINE:retourner un nouveau LineAnnotationElement(t);cas n.AnnotationType.SQUARE:retourner un nouveau SquareAnnotationElement(t);cas n.AnnotationType.CIRCLE:retourner un nouveau CircleAnnotationElement(t);cas n.AnnotationType .POLYLINE : renvoie un nouvel élément PolylineAnnotationElement(t) ; cas n.AnnotationType.CARET : renvoie un nouveau élément CaretAnnotationElement (t) ; cas n.AnnotationType.INK : renvoie un nouvel élément InkAnnotationElement(t) ; cas n.AnnotationType.POLYGON : renvoie un nouveau élément PolygonAnnotationElement (t) ; cas n. t);cas n.AnnotationType.SQUIGGLY:retourner un nouveau SquigglyAnnotationElement(t);cas n.AnnotationType.STRIKEOUT:retourner un nouveau StrikeOutAnnotationElement(t);cas n.AnnotationType.STAMP:retourner un nouveau StampAnnotationElement(t);cas n.AnnotationType. FILEATTACHMENT : renvoie le nouveau FileAttachmentAnnotationElement(t) ; par défaut : renvoie le nouveau AnnotationElement(t)}}} class AnnotationElement{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}= {}){this.isRenderable=e;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService; cette.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions= t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;e&&(this.container=this._createContainer(s));n&&(this.quadrilaterals=this._createQuadrilaterals(s))}_createContainer( t=!1){const e=this.data,s=this.page,r=this.viewport,a=document.createElement("section");let{width:i,height:o}=getRectDims(e .rect);a.setAttribute("data-annotation-id",e.id);const l=n.Util.normalizeRect([e.rect[0],s.view[3]-e.rect[1 ]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]);if(e.hasOwnCanvas){const t=r .transform.slice(),[e,s]=n.Util.singularValueDecompose2dScale(t);i=Math.ceil(i*e);o=Math.ceil(o*s);l[0]*=e;l[1]*=s;for(let e=0;e<4;e++)t[e ]=Math.sign(t[e]);a.style.transform=`matrix(${t.join(",")})`}else a.style.transform=`matrix(${r.transform .join(",")})`;a.style.transformOrigin=`${-l[0]}px ${-l[1]}px`;if(!t&&e.borderStyle.width>0){ a.style.borderWidth=`${e.borderStyle.width}px`;if(e.borderStyle.style!==n.AnnotationBorderStyleType.UNDERLINE){i-=2*e.borderStyle.width;o-=2 *e.borderStyle.width}const t=e.borderStyle.horizontalCornerRadius,s=e.borderStyle.verticalCornerRadius;if(t>0||s>0){const e=`${t}px / ${s} px`;a.style.borderRadius=e}switch(e.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:a.style. borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED :(0,n.warn)("Style de bordure non implémenté : biseauté");break;case n.AnnotationBorderStyleType.INSET :(0,n.warn)("Style de bordure non implémenté : encart");break;case n.AnnotationBorderStyleType.UNDERLINE:a.style .borderBottomStyle="solid"}e.borderColor||e.color||null?a.style.borderColor=n.Util.makeHexColor(0|e.color[0],0|e.color[1],0 |e.color[2]):a.style.borderWidth=0}a.style.left=`${l[0]}px`;a.style.top=`${l[1]}px` ;if(e.hasOwnCanvas)a.style.width=a.style.height="auto";else{a.style.width=`${i}px`;a.style.height=`${o} px`}return a}get _commonActions(){const setColor=(t,e,s)=>{const n=s.detail[t];s.target.style[e]=i.ColorConverters[`${ n[0]}_HTML`](n.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2 ==1;t.target.style.visibility=e?"hidden":"visible";ceci.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage .setValue(this.data.id,{print:t.detail.print})},hidden:t=>{t.target.style.visibility=t.detail.hidden?"hidden":"visible";this .annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})) ,0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly","") : t.target.removeAttribute("readonly")},required:t=>{t.detail.required?t.target.setAttribute("required",""):t.target.removeAttribute("required")}, bgColor:t=>{setColor("bgColor","backgroundColor",t)},fillColor:t=>{setColor("fillColor","backgroundColor",t)},fgColor:t=>{setColor("fgColor","color",t)},textColor:t=>{setColor("textColor","color",t)} ,borderColor:t=>{setColor("borderColor","borderColor",t)},strokeColor:t=>{setColor("strokeColor","borderColor",t)}})}_dispatchEventFromSandbox(t,e){ const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r&&r(e)}}_setDefaultPropertiesFromJS(t){if(! this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e )){const a=s[n];if(a){a({detail:r,target:t});delete e[n]}}}_createQuadrilaterals(t=!1){if(!this. data.quadPoints)return null;const e=[],s=this.data.rect;for(const s of this.data.quadPoints){this.data.rect=[s[2].x,s[2].y,s[1].x,s[1].y];e.push(this._createContainer(t)) }this.data.rect=s;return e}_createPopup(t,e){let s=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;s=this.quadrilaterals[0] }if(!t){(t=document.createElement("div")).style.height=s.style.height;t.style.width=s.style.width;s.appendChild(t)}const n=nouveau PopupElement({container:s,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}) .render();n.style.left=s.style.width;s.appendChild(n)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals)e.className=t;return this.quadrilaterals}rendre (){(0,n.unreachable)("Méthode abstraite `AnnotationElement.render` appelée")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:t,id:a,exportValues:i}of r){if(-1===t)continue;if(a===e)continue; const r="string"==typeof i?i:null,o=document.getElementById(a);!o||c.has(o)?s.push({id:a,exportValue:r,domElement : o}):(0,n.warn)(`_getElementsByName - élément non autorisé : ${a}`)}return s}for(const n of document.getElementsByName(t)){const{id:t,exportValue : r}=n;t!==e&&(c.has(n)&&s.push({id:t,exportValue:r,domElement:n}))}return s}static get platform(){const t=" undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac" )})}}la classe LinkAnnotationElement étend AnnotationElement{constructor(t,e=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action|| t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder : !!e ?.ignoreBorder,createQuadrilaterals :!0})}render(){const{data:t,linkService:e}=this,s=document.createElement("a");if(t.url)e.addLinkAttributes(s ,t.url,t.newWindow);else if(t.action)this._bindNamedAction(s,t.action);else if(t.dest)this._bindLink(s,t.dest);else{let e =!1;if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){e=!0; this._bindJSAction(s,t)}t.resetForm?this._bindResetFormAction(s,t.resetForm):e||this._bindLink(s,"")}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation ").map(((t,e)=>{const n=0===e?s:s.cloneNode();t.appendChild(n);return t}));this.container.className="linkAnnotation";this.container.appendChild(s);return this.container}_bindLink(t,e){t.href=this.linkService. getDestinationHash(e);t.onclick=()=>{e&&this.linkService.goToDestination(e);return!1};(e||""===e)&&(t.className="internalLink")} _bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl("");t.onclick=()=>{this.linkService.executeNamedAction(e);return!1};t.className="internalLink "}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"] ,["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const r=s.get(n);r&&(t[r]=()=> {this.linkService.eventBus ?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}});return!1})}t.onclick||(t.onclick=()=>!1) ;t.className="internalLink"}_bindResetFormAction(t,e){const s=t.onclick;s||(t.href=this.linkService.getAnchorUrl(""));t.className="internalLink" ; if(this._fieldObjects)t.onclick=()=>{s&&s();const{fields:t,refs:n,include:r}=e,a=[];if(0!==t.length ||0!==n.length){const e=new Set(n);for(const s of t){const t=this._fieldObjects[s]||[];for(const{id:s} of t)e.add(s)}for(const t of Object.values(this._fieldObjects))for(const s of t)e.has(s.id)===r&&a.push(s)}else for(const t of Object.values(this._fieldObjects))a.push(...t);const i=this.annotationStorage,o=[];for(const t of a){const{id:e} =t;o.push(e);switch(t.type){case"text":{const s=t.defaultValue||"";i.setValue(e,{value:s});break}case"checkbox":case"radiobutton":{const s=t.defaultValue===t.exportValues;i.setValue(e,{value:s});break}case" combobox":case"listbox":{const s=t.defaultValue||"";i.setValue(e,{value:s});break}default:continue}const s=document.getElementById(e);s&&c .has(s)&&s.dispatchEvent(new Event("resetform"))}this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o ,name:"ResetForm"}});return!1};else{(0,n.warn)('_bindResetFormAction - L'action "resetForm" n'est pas prise en charge, assurez-vous que le paramètre `fieldObjects` est fourni.');s| |(t.onclick=()=>!1)}}}class TextAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");t.style.height=this.container.style.height;t.style.width=this.container.style.width;t.src=this.imageResourcesPath+"annotation-" +this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify ({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.appendChild(t);return this.container}}la classe WidgetAnnotationElement étend AnnotationElement{ render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}_getKeyModifier(t){const{isWin:e,isMac:s}=AnnotationElement.platform;return e&&t.ctrlKey||s&&t.metaKey}_setEventListener(t,e,s,n){e.includes("mouse")?t.addEventListener(e,(t=>{this.linkService.eventBus?. dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}}) })):t.addEventListener(e,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value: n(t)}})}))}_setEventListeners(t,e,s){for(const[n,r]of e)("Action"===r||this.data.actions?.[r ])&&this._setEventListener(t,n,r,s)}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":n. Util.makeHexColor(e[0],e[1],e[2])}}class TextWidgetAnnotationElement étend WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e ,s,n){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id)){a.domElement&&(a.domElement[e]=s);r.setValue( a.id,{[n]:s})}}render(){const t=this.annotationStorage,e=this.data.id;this.container.className="textWidgetAnnotation";let s=null;if( this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue}),r=n.formattedValue||n.value||"",a={userValue :null,formattedValue :null ,valueOnFocus :""};if(this.data.multiLine){s=document.createElement("textarea");s.textContent=r}else{s=document.createElement("input");s.type= "texte";s.setAttribute("valeur",r)}c.add(s);s.disabled=this.data.readOnly;s.name=this.data.fieldName;s.tabIndex=l;a.userValue=r;s.setAttribute("id", e);s.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value});this.setPropertyOnSiblings(s,"value",n.target.value," value")}));s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue ??"";s.value=a.userValue=e;a.formattedValue=null}) );let blurListener=t=>{const{formattedValue:e}=a;null!=e&&(t.target.value=e);t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ s.addEventListener("focus",(t=>{a.userValue&&(t.target.value=a.userValue);a.valueOnFocus=t.target.value}));s.addEventListener("updatefromsandbox",( s=>{const n={valeur(s){a.userValue=s.detail.value??"";t.setValue(e,{value:a.userValue.toString()});s.target.value=a.userValue},formattedValue(s){const{formattedValue:n}=s.detail;a.formattedValue=n;null!=n&&s .target!==document.activeElement&&(s.target.value=n);t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail. selRange)}};this._dispatchEventFromSandbox(n,s)}));s.addEventListener("keydown",(t=>{let s=-1;"Escape"===t.key?s=0 : "Entrée"===t.key?s=2 :"Tab"===t.key&&(s=3);if(-1===s)return;const{value:n}=t.target ;if(a.valueOnFocus!==n){a.userValue=n;this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value :n,willCommit:!0,commitKey:s,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}}));const n=blurListener;blurListener=null;s.addEventListener("blur",(t=>{const{value:s}=t.target;a.userValue=s;this._mouseState.isDown&&a.valueOnFocus!==s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox" ,{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}) ;n(t)}));this.data.actions?.Keystroke&&s.addEventListener("beforeinput",(t=>{const{data:s,target:n}=t,{value:r,selectionStart:a ,selectionEnd:i}=n;let o=a,l=i;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,a).match(/\w*[^ \w]*$/);t&&(o-=t[0].length);break}case"deleteWordForward":{const t=r.substring(a).match(/^[^\w]*\ w*/);t&&(l+=t[0].length);break}case"deleteContentBackward":a===i&&(o-=1);break;case"deleteContentForward":a===i&&(l+=1)}t.preventDefault();this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:" Keystroke",value:r,change:s||"",willCommit:!1,selStart:o,selEnd:l}})}));this._setEventListeners(s,[["focus","Focus"] ,["flou","Flou"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseave","Mouse Exit"],["mouseup"," Souris vers le haut"]],(t=>t.target.value))}blurListener&&s.addEventListener("blur",blurListener);null!==this.data.maxLen&&(s.maxLength=this.data.maxLen); if(this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;s.classList.add("comb");s .style.letterSpacing=`calc(${t}px - 1ch)`}}else{s=document.createElement("div");s.textContent=this.data.fieldValue;s.style.verticalAlign="middle";s .style.display="table-cell"}this._setTextStyle(s);this._setBackgroundColor(s);this._setDefaultPropertiesFromJS(s);this.container.appendChild(s);return this.container}_setTextStyle(t) {const e=["left","center","right"],{fontSize:s,fontColor:r}=this.data.defaultAppearanceData,a=t.style;s&&(a.fontSize=`${s }px`);a.color=n.Util.makeHexColor(r[0],r[1],r[2]);null!==this.data.textAlignment&&(a.textAlign=e[this.data .textAlignment])}}la classe CheckboxWidgetAnnotationElement étend WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e. id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;if("string"==typeof n){n="Off"!==n;t.setValue(s,{value:n})}this.container. className="boutonWidgetAnnotation checkBox" ;const r=document.createElement("input");c.add(r);r.disabled=e.readOnly;r.type="checkbox";r.name=e.fieldName ; n&&r.setAttribute("checked",!0);r.setAttribute("id",s);r.setAttribute("exportValue",e.exportValue);r.tabIndex=l;r.addEventListener("change", (n=>{const{name:r,checked:a}=n.target;for(const n of this._getElementsByName(r,s)){const s=a&&n.exportValue===e.exportValue;n. domElement&&(n.domElement.checked=s);t.setValue(n.id,{value:s})}t.setValue(s,{value:a})}));r.addEventListener("resetform", (t=>{const s=e.defaultFieldValue||"Off";t.target.checked=s===e.exportValue}));if(this.enableScripting&&this.hasJSActions){r.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e. detail.value;t.setValue(s,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)}));this._setEventListeners(r,[["change","Valider" ],["change","Action"],["focus","Focus"],["blur","Flou"],["mousedown","Mouse Down"],["mouseenter","Souris Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}this._setBackgroundColor(r);this._setDefaultPropertiesFromJS( r);this.container.appendChild(r);return this.conteneur}} la classe RadioButtonWidgetAnnotationElement étend WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,e= this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n){n=n !==e.buttonValue;t.setValue(s,{value:n})}const r=document.createElement("input");c.add(r);r.disabled=e.readOnly;r.type ="radio";r.name=e.fieldName;n&&r.setAttribute("checked",!0);r.setAttribute("id",s);r.tabIndex=l;r.addEventListener("change", (e=>{const{name:n,checked:r}=e.target;for(const e of this._getElementsByName(n,s))t.setValue(e.id,{value:!1}); t.setValue(s,{value:r})}));r.addEventListener("resetform",(t=>{const s=e.defaultFieldValue;t.target.checked=null!=s&&s===e.buttonValue}));if(this.enableScripting&&this.hasJSActions){const n=e.buttonValue;r.addEventListener("updatefromsandbox ",(e=>{const r={value:e=>{const r=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e= r&&n.id===s;n.domElement&&(n.domElement.checked=e);t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)})) ;this._setEventListeners(r,[["change","Valider"],["change","Action"],["focus","Focus"],["blur","Blur"],[" mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target .vérifié))}this._setBackgroundColor(r);this._setDefaultPropertiesFromJS(r);this.container.appendChild(r);return this.container}}la classe PushButtonWidgetAnnotationElement étend LinkAnnotationElement{constructor(t){super(t,{ignoreBorder : t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(t.title=this.data.alternativeText);this._setDefaultPropertiesFromJS (t);return t}}class ChoiceWidgetAnnotationElement étend WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this. annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue});let{fontSize:n}=this.data.defaultAppearanceData;n||(n=9) ;const r=`calc(${n}px * var(--zoom-factor))`,a=document.createElement("select");c.add(a);a.disabled=this.data.readOnly;a.name=this.data.fieldName;a.setAttribute("id",e);a.tabIndex=l ;a.style.fontSize=`${n}px`;if(!this.data.combo){a.size=this.data.options.length;this.data.multiSelect&&(a.multiple=!0) }a.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of a.options)t.selected=t.value===e}));for(const t de this.data.options){const e=document.createElement("option");e.textContent=t.displayValue;e.value=t.exportValue;this.data.combo&&(e.style.fontSize=r );s.value.includes(t.exportValue)&&e.setAttribute("selected",!0);a.appendChild(e)}const getValue=(t,e)=>{const s=e?"value" :"textContent",n=t.target.options;return t.target.multiple?Array.prototype.filter.call(n,(t=>t.selected)).map((t=>t[s])):-1===n.selectedIndex?null:n[n.selectedIndex][s]},getItems=t=>{const e=t.target.options ; return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};if(this.enableScripting&&this.hasJSActions){a.addEventListener("updatefromsandbox" ,(s=>{const n={value(s){const n=s.detail.value,r=new Set(Array.isArray(n)?n:[n]);for(const t of a. options)t.selected=r.has(t.value);t.setValue(e,{value:getValue(s,!0)})},multipleSelection(t){a.multiple=!0},remove( s){const n=a.options,r=s.detail.remove;n[r].selected=!1;a.remove(r);if(n.length>0){-1===Tableau .prototype.findIndex.call(n,(t=>t.selected))&&(n[0].selected=!0)}t.setValue(e,{value:getValue(s,!0),items : getItems(s)})},clear(s){for(;0!==a.length;)a.remove(0);t.setValue(e,{value:null,items:[]})} ,insérer(s){const{index :n,displayValue:r,exportValue:i}=s.detail.insert,o=document.createElement("option");o.textContent=r;o.value=i;a.insertBefore(o,a.children[n] );t.setValue(e,{value:getValue(s,!0),items:getItems(s)})},items{const{items:n}=s.detail;for(;0! ==a.length;)a.remove(0);for(const t of n){const{displayValue:e,exportValue:s}=t,n=document.createElement("option");n.textContent= e;n.value=s;a.appendChild(n)}a.options.length>0&&(a.options[0].selected=!0);t.setValue(e,{value:getValue(s,! 0),items:getItems(s)})},indices{const n=new Set(s.detail.indices);for(const t of s.target.options)t.selected=n.has( t.index);t.setValue(e,{value:getValue(s,!0)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n ,s)}));a.addEventListener("input",(s=>{const n=getValue(s,!0),r=getValue(s,!1);t.setValue(e,{value:n});this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail :{id:e,name:"Keystroke",value:r,changeEx:n,willCommit :!0 ,commitKey:1,keyDown:!1}})}));this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Souris Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(t =>t.target.checked))}else a.addEventListener("input",(function(s){t.setValue(e,{value:getValue(s,!0)})}));this._setBackgroundColor (a);this._setDefaultPropertiesFromJS(a);this.container.appendChild(a);return this.container}}class PopupAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="popupAnnotation";if(["Ligne" ,"Carré","Cercle","PolyLigne","Polygone","Encre"].includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${ this.data.parentId}"]`,e=this.layer.querySelectorAll(t);if(0===e.length)return this.container;const s=new PopupElement({container:this.container,trigger :Array.from(e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}), r=this.page,a=n.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data .parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),i=a[0]+this.data.parentRect[2]-this.data.parentRect[0],o=a[1];this.container.style.transformOrigin=`${-i}px ${-o}px`;this.container.style. left=`${i}px`;this.container.style.top=`${o}px`;this.container.appendChild(s.render());return this.container}}class PopupElement{constructor( t){this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj ;this.richText=t.richText;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper ";this.hideElement=this.hideWrapper?t:this.container;this.hideElement.hidden=!0;const e=document.createElement("div");e.className="popup";const s=this. couleur;si(s){const t=.7*(255-s[0])+s[0],r=.7*(255-s[1])+s[1],a=.7 *(255-s[2])+s[2];e.style.backgroundColor=n.Util.makeHexColor(0|t,0|r,0|a)}const a=document.createElement("h1");a.dir=this.titleObj.dir;a.textContent=this.titleObj .str;e.appendChild(a);const i=r.PDFDateString.toDateObject(this.modificationDate);if(i){const t=document.createElement("span");t.className="popupDate";t .textContent="{{date}}, {{time}}";t.dataset.l10nId="annotation_date_string";t.dataset.l10nArgs=JSON.stringify({date:i.toLocaleDateString(),time:i. toLocaleTimeString()});e.appendChild(t)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const t=this._formatContents (this.contentsObj);e.appendChild(t)}else{o.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:e});e.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const t of this.trigger){t.addEventListener("click",this._toggle.bind(this));t.addEventListener("mouseover ",this._show.bind(this,!1));t.addEventListener("mouseout",this._hide.bind(this,!1))}e.addEventListener("click",this._hide.bind( this,!0));t.appendChild(e);return t}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.className="popupContent" ; s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t) {const r=n[t];s.appendChild(document.createTextNode(r));t<e-1&&s.appendChild(document.createElement("br"))}return s}_toggle(){this.pinned ? this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=! 1;ce.style.de.conteneur.zIndex+=1}}_hide(t=!0){t&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container. style.zIndex-=1}}}la classe FreeTextAnnotationElement étend AnnotationElement{constructeur(t){super(t,{isRenderable : !!(t.data.hasPopup||t.data.titleObj?.str||t.data. contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="freeTextAnnotation";this.data.hasPopup||this._createPopup(null, this.data);return this.container}}class LineAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t. data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:e ,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s),r=this.svgFactory.createElement("svg:line");r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);r.setAttribute("y1",t.rect[3]-t .lineCoordinates[1]);r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3 ]);r.setAttribute("largeur de trait",t.borderStyle.width||1);r.setAttribute("trait","transparent");r.setAttribute("remplir","transparent");n .appendChild(r);this.container.append(n);this._createPopup(r,t);return this.container}}class SquareAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!( t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this. container.className="squareAnnotation";const t=this.data,{width:e,height :s}=getRectDims(t.rect),n=this.svgFactory.create(e,s),r=t.borderStyle.width,a=this.svgFactory.createElement("svg:rect");a.setAttribute( "x",r/2);a.setAttribute("y",r/2);a.setAttribute("width",er);a.setAttribute("height",sr);a.setAttribute("stroke -width",r||1);a.setAttribute("stroke","transparent");a.setAttribute("fill","transparent");n.appendChild(a);this.container.append(n );this._createPopup(a,t);return this.container}}la classe CircleAnnotationElement étend AnnotationElement{constructeur(t){super(t,{isRenderable : !!(t.data.hasPopup||t.data.titleObj ? .str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this. data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s),r=t.borderStyle.width,a=this.svgFactory.createElement("svg:ellipse");a.setAttribute("cx",e/2);a.setAttribute(" cy",s/2);a.setAttribute("rx",e/2-r/2);a.setAttribute("ry",s/2-r/2);a.setAttribute("stroke-width ",r||1);a.setAttribute("stroke","transparent");a.setAttribute("fill","transparent");n.appendChild(a);this.container.append(n); this._createPopup(a,t);return this.container}}class PolylineAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str ||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0});this.containerClassName="polylineAnnotation";this.svgElementName="svg:polyline"}render() {this.container.className=this.containerClassName ;const t=this.data,{width:e,height:s}=getRectDims(t.rect),n=this.svgFactory.create(e,s);let r=[];for(const e of t. sommets){const s=ex-t.rect[0],n=t.rect[3]-ey;r.push(s+","+n)}r=r.join(" ");const a =this.svgFactory.createElement(this.svgElementName);a.setAttribute("points",r);a.setAttribute("largeur de trait",t.borderStyle.width||1);a.setAttribute("trait" ,"transparent");a.setAttribute("fill","transparent");n.appendChild(a);this.container.append(n);this._createPopup(a,t);return this.container}} la classe PolygonAnnotationElement étend PolylineAnnotationElement{constructor(t){super(t);this.containerClassName="polygonAnnotation";this.svgElementName="svg:polygon"}}la classe CaretAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable :!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container. className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class InkAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!( t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder :!0});this.containerClassName="inkAnnotation ";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:e,height:s}=getRectDims(t.rect), n=this.svgFactory.create(e,s);for(const e of t.inkLists){let s=[];for(const n of e){const e=nx-t.rect[0],r =t.rect[3]-ny;s.push(`${e},${r}`)}s=s.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",s);r.setAttribute("largeur de trait",t.borderStyle.width||1);r.setAttribute("trait","transparent");r.setAttribute ("fill","transparent");this._createPopup(r,t);n.appendChild(r)}this.container.append(n);return this.container}}class HighlightAnnotationElement étend AnnotationElement{constructor(t) {super(t,{isRenderable : !!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder : !0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this. container.className="highlightAnnotation" ; renvoie ceci.conteneur}}la classe UnderlineAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable : !!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str|| t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals) return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}class SquigglyAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!!(t.data. hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this .data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}la classe StrikeOutAnnotationElement étend AnnotationElement{constructeur(t){super(t,{isRenderable : !!(t.data.hasPopup||t.data.titleObj?.str| |t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null, this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}la classe StampAnnotationElement étend AnnotationElement{constructor(t){super(t ,{isRenderable : !!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder : !0}) }render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class FileAttachmentAnnotationElement étend AnnotationElement{constructor(t){super(t,{isRenderable:!0});const{filename:e,content:s}=this.data.file;this.filename=( 0,r.getFilenameFromUrl)(e);this.content=s;this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:s})}render(){this. container.className="fileAttachmentAnnotation";const t=document.createElement("div");t.style.height=this.container.style.height;t.style.width=this.container.style.width;t. addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this ._createPopup(t,this.data);this.container.appendChild(t);return this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class AnnotationLayer{static render(t){const e=[],s=[];for(const r of t.annotations){ if(!r)continue;const{width:t,height:a}=getRectDims(r.rect);t<=0||a<=0||(r.annotationType!==n.AnnotationType.POPUP ? e.push(r):s.push(r))}s.length&&e.push(...s);const i=t.div;for(const s of e){const e=AnnotationElementFactory.create({ data:s,layer:i,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms : !1!==t .renderForms, svgFactory : nouveau r.DOMSVGFactory, annotationStorage : t.annotationStorage||nouveau a.AnnotationStorage, enableScripting : t.enableScripting, hasJSActions : t.hasJSActions, fieldObjects : t.fieldObjects, mouseState : t.mouseState|| !1}});if(e.isRenderable){const t=e.render();s.hidden&&(t.style.visibility="hidden");if(Array.isArray(t))for(const e of t)i.appendChild(e);else e instanceof PopupAnnotationElement?i.prepend (t):i.appendChild(t)}}this.#d(i,t.annotationCanvasMap)}mise à jour statique(t){const{page:e,viewport:s,annotations:r,annotationCanvasMap:a,div : i}=t,o=s.transform,l=`matrix(${o.join(",")})`;let c,h;for(const t of r){const s=i.querySelectorAll( `[data-annotation-id="${t.id}"]`);if(s)for(const r of s)if(t.hasOwnCanvas){const s=n.Util.normalizeRect([t. rect[0],e.view[3]-t.rect[1]+e.view[1],t.rect[2],e.view[3]-t.rect[3]+e.view [1]]);if(!h){c=Math.abs(o[0]||o[1]);const t=o.slice();for(let e=0;e<4; e++)t[e]=Math.sign(t[e]);h=`matrice(${t.join(",")})`}const a=s[0]*c,i=s[ 1]*c;r.style.left=`${a}px`;r.style.top=`${i}px`;r.style.transformOrigin=`${-a}px ${-i }px`;r.style.transform=h}else r.style.transform=l}this.#d(i,a);i.hidden=!1}static#d(t,e){if(e){for(const[s, n]de e){const e=t.querySelector(`[data-annotation-id="${s}"]`);if(!e)continue;const{firstChild:r}=e;"CANVAS" ===r.nodeName?e.replaceChild(n,r):e.insertBefore(n,r)}e.clear()}}}},(t,e)=>{Object.defineProperty(e," __esModule",{value:!0});e.ColorConverters=void 0;function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString( 16).padStart(2,"0")}e.ColorConverters=class ColorConverters{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3* t+.59*s+.11*e+n)]}G_CMJN statique([t]){retour["CMJN",0,0,0,1-t]}G_RVB statique([t]){retour[" RGB",t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e ,s]){retour["G",.3*t+.59*e+.11*s]}static RGB_HTML([t,e,s]){return`#${makeColorComp(t)}${makeColorComp(e)}${makeColorComp(s)}`}static T_HTML(){return" #00000000"}statique CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n), 1-Math.min(1,e+n)]}static CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}static RGB_CMYK([t,e,s]){const n=1- t,r=1-e,a=1-s;return["CMYK",n,r,a,Math.min(n,r,a)]}}},(t,e,s)=> {Object.defineProperty(e,"__esModule",{value:!0});e.XfaLayer=void 0;var n=s(18);e.XfaLayer=class XfaLayer{static setupStorage(t,e,s, n,r){const a=n.getValue(e,{value:null});switch(s.name){case"textarea":null!==a.value&&(t.textContent=a.value); if("print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input ":if("radio"===s.attributs.type||"checkbox"===s.attributes.type){a.value===s.attributes.xfaOn?t.setAttribute("coché",!0):a.value===s. attributs.xfaOff&&t.removeAttribute("checked");if("print"===r)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked ?t.target.getAttribute("xfaOn") :t.target.getAttribute("xfaOff")})}))}else{null !==a.value&&t.setAttribute("value",a.value);if ("print"===r)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select" :if(null!==a.value)for(const t of s.children)t.attributes.value===a.value&&(t.attributes.selected=!0);t.addEventListener("input", (t=>{const s=t.target.options,r=-1===s.selectedIndex?"":s[s.selectedIndex].value;n.setValue(e,{value:r})}))}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributs :a}=e,i=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${n}`);for(const[e,s]of Object.entries(a))if(null!=s&&"dataId"!==e)if("style"!==e)if("textContent"===e)t.textContent=s;else if( "class"===e)s.length&&t.setAttribute(e,s.join(" "));else{if(i&&("href"===e||"newWindow"===e))continue ;t.setAttribute(e,s)}else Object.assign(t.style,s);i&&r.addLinkAttributes(t,a.href,a.newWindow);s&&a.dataId&&this.setupStorage(t,a.dataId,e ,s)}static render(t){const e=t.annotationStorage,s=t.linkService,r=t.xfaHtml,a=t.intent||"display",i=document.createElement(r.name) ;r.attributs&&this.setAttributes({html:i,element:r,intent:a,linkService:s});const o=[[r,-1,i]],l=t.div;l.appendChild(i); if(t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==a&&l.setAttribute(" class","xfaLayer xfaFont");const c=[];for(;o.length>0;){const[t,r,i]=o[o.length-1];if(r+1= ==t.children.length){o.pop();continue}const l=t.children[++o[o.length-1][1]];if(null===l)continue;const {name:h}=l;if("#text"===h){const t=document.createTextNode(l.value);c.push(t);i.appendChild(t);continue}let d ;d=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h);i.appendChild(d);l.attributes&&this.setAttributes({html:d,element :l,storage:e,intent:a,linkService:s});if(l.children&&l.children.length>0)o.push([l,-1,d]);else if(l.value){const t=document.createTextNode(l.value);n.XfaText.shouldBuildText(h)&&c.push(t) ;d.appendChild(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}mise à jour statique (t){const e=`matrice(${t.viewport.transform.join(",")})`;t.div.style.transform=e;t.div.hidden=!1}}}, (t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.renderTextLayer=fonction renderTextLayer(t){const e=new TextLayerRenderTask({textContent:t.textContent ,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});e._render(t.timeout);return e };var n=s(1);const r=30,a=nouvelle carte,i=/^\s+$/g;fonction appendText(t,e,s,o){const l=document.createElement("span"),c=t._enhanceTextSelection ?{angle:0,canvasWidth:0,hasText :""!==e.str,hasEOL:e.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1} :{angle:0,canvasWidth:0, hasText:""!==e.str,hasEOL:e.hasEOL};t._textDivs.push(l);const h=n.Util.transform(t._viewport.transform,e.transform);let d= Math.atan2(h[1],h[0]);const u=s[e.fontName];u.vertical&&(d+=Math.PI/2);const p=Math.hypot(h[2], h[3]),f=p*fonction getAscent(t,e){const s=a.get(t);if(s)return s;e.save();e.font=`30px ${t }`;const n=e.measureText("");let i=n.fontBoundingBoxAscent,o=Math.abs(n.fontBoundingBoxDescent);if(i){e.restore();const s=i/(i +o);a.set(t,s);return s}e.strokeStyle="red";e.clearRect(0,0,r,r);e.strokeText("g",0,0);let l=e.getImageData(0,0,r,r).data;o=0;for(let t=l.length-1-3;t>=0;t-=4) if(l[t]>0){o=Math.ceil(t/4/r);break}e.clearRect(0,0,r,r);e.strokeText("A",0,r) ;l=e.getImageData(0,0,r,r).data;i=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]> 0){i=r-Math.floor(t/4/r);break}e.restore();if(i){const e=i/(i+o);a.set(t,e) ;return e}a.set(t,.8);return.8}(u.fontFamily,o);let g,m;if(0===d){g=h[4];m=h [5]-f}else{g=h[4]+f*Math.sin(d);m=h[5]-f*Math.cos(d)}l.style.left=`${g }px`;l.style.top=`${m}px`;l.style.fontSize=`${p}px`;l.style.fontFamily=u.fontFamily;l.setAttribute("rôle", "présentation");l.textContent=e.str;l.dir=e.dir;t._fontInspectorEnabled&&(l.dataset.fontName=e.fontName);0!==d&&(c.angle=d*(180 /Math.PI));let _=!1;if(e.str.length>1||t._enhanceTextSelection&&i.test(e.str))_=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),s=Math.abs(e.transform[3]); t!==s&&Math.max(t,s)/Math.min(t,s)>1.5&&(_=!0)}_&&(u.vertical?c.canvasWidth=e.height*t._viewport.scale :c.canvasWidth=e.width*t._viewport.scale);t._textDivProperties.set(l,c);t._textContentStream&&t._layoutText(l);if(t._enhanceTextSelection&&c.hasText){let s=1, r=0;if(0!==d){s=Math.cos(d);r=Math.sin(d)}const a=(u.vertical?e.height:e.width)*t. _viewport.scale,i=p;let o,c;if(0!==d){o=[s,r,-r,s,g,m];c=n.Util.getAxialAlignedBoundingBox([0, 0,a,i],o)}else c=[g,m,g+a,m+i];t._bounds.push({left:c[0],top:c[1],right : c[2],bottom :c[3],div :l,size :[a,i],m :o})}}fonction render(t){if(t._canceled)return ;const e=t. _textDivs,s=t._capability,n=e.length;if(n>1e5){t._renderingDone=!0;s.resolve()}else{if(!t._textContentStream)for(let s=0;s<n;s++)t._layoutText(e[s]);t._renderingDone=!0;s.resolve()}}function findPositiveMin(t,e,s){let n=0;for(let r=0;r<s;r++){const s=t[e++];s>0&&(n=n?Math.min(s,n):s)}return n}fonction expand(t){const e=t._bounds,s=t._viewport,r=function expandBounds(t,e,s){const n=s.map((function(t,e){return{x1:t .left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,n);const r=new Array(s.length);for(const t of n){const e=t.index;r[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}s .map((fonction(e,s){const a=r[s],i=n[s];i.x1=e.top;i.y1=ta.right;i.x2=e.bottom; i.y2=ta.left;i.index=s;i.x1New=void 0;i.x2New=void 0}));expandBoundsLTR(e,n);for(const t of n){const e=t .index;r[e].top=t.x1New;r[e].bottom=t.x2New}return r}(s.width,s.height,e);for(let s=0;s<r .length;s++){const a=e[s].div,i=t._textDivProperties.get(a);if(0===i.angle){i.paddingLeft=e[s].left-r[s].left;i.paddingTop=e[s].top -r[s].top;i.paddingRight=r[s].right-e[s].right;i.paddingBottom=r[s].bottom-e[s].bottom;t._textDivProperties.set( a,i);continue}const o=r[s],l=e[s],c=lm,h=c[0],d=c[1],u=[[0,0],[ 0,l.size[1]],[l.size[0],0],l.size],p=new Float64Array(64);for(let t=0,e=u.length;t<e ;t++){const e=n.Util.applyTransform(u[t],c);p[t+0]=h&&(o.left-e[0])/h;p[t+4]=d&& (o.top-e[1])/d;p[t+8]=h&&(o.right-e[0])/h;p[t+12]=d&&(o.bottom-e[1 ])/d;p[t+16]=d&&(o.left-e[0])/-d;p[t+20]=h&&(o.top-e[1])/h;p[ t+24]=d&&(o.right-e[0])/-d;p[t+28]=h&&(o.bottom-e[1])/h;p[t+32]=h&&( o.left-e[0])/-h;p[t+36]=d&&(o.top-e[1])/-d;p[t+40]=h&&(o.right-e[ 0])/-h;p[t+44]=d&&(o.bottom-e[1])/-d;p[t+48]=d&&(o.gauche-e[0])/d;p[t+52]=h&&(o.top-e[1])/-h;p[t+56]=d&&(o.droite-e[0]) /d;p[t+60]=h&&(o.bottom-e[1])/-h}const f=1+Math.min(Math.abs(h),Math.abs(d));i .paddingLeft=findPositiveMin(p,32,16)/f;i.paddingTop=findPositiveMin(p,48,16)/f;i.paddingRight=findPositiveMin(p,0,16)/f;i.paddingBottom=findPositiveMin( p,16,16)/f;t._textDivProperties.set(a,i)}}function expandBoundsLTR(t,e){e.sort((function(t,e){return t.x1-e.x1| |t.index-e.index}));const s=[{début :-1/0,fin :1/0,limite :{x1 :-1/0,y1 :-1/0,x2:0 ,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of e){let e=0;for(;e<s.length&&s[e].end< =t.y1;)e++;let n,r,a=s.length-1;for(;a>=0&&s[a].start>=t.y2;)a--;let i,o,l =-1/0;for(i=e;i<=a;i++){n=s[i];r=n.boundary;let e;e=r.x2>t.x1?r.index> t.index?r.x1New:t.x1:void 0===r.x2New?(r.x2+t.x1)/2:r.x2New;e>l&&(l=e)}t.x1New=l;for(i=e;i<=a;i++){n=s[i];r=n.boundary;void 0===r.x2New?r. x2>t.x1?r.index>t.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2)) }const c=[];let h=null;for(i=e;i<=a;i++){n=s[i];r=n.boundary;const e=r.x2>t.x2 ? r:t;if(h===e)c[c.length-1].end=n.end;else{c.push({start:n.start,end:n.end,boundary:e} );h=e}}if(s[e].start<t.y1){c[0].start=t.y1;c.unshift({start:s[e].start,end:t. y1,boundary:s[e].boundary})}if(t.y2<s[a].end){c[c.length-1].end=t.y2;c.push({start:t .y2,end:s[a].end,boundary:s[a].boundary})}for(i=e;i<=a;i++){n=s[i];r=n.boundary ; if(void 0!==r.x2New)continue;let t=!1;for(o=e-1;!t&&o>=0&&s[o].start>=r.y1;o--)t=s [o].boundary===r;for(o=a+1;!t&&o<s.length&&s[o].end<=r.y2;o++)t=s[o].boundary===r; pour(o=0;!t&&o<c.length;o++)t=c[o].boundary===r;t||(r.x2New=l)}Array.prototype.splice.apply(s,[e,a-e+1].concat(c) )}for(const e of s){const s=e.boundary;void 0===s.x2New&&(s.x2New=Math.max(t,s.x2))}}class TextLayerRenderTask{constructor({textContent :t,textContentStream:e,container:s,viewport:r,textDivs:a,textContentItemsStr:i,enhanceTextSelection:o}){this._textContent=t;this._textContentStream=e;this._container=s;this._document =s.ownerDocument;this._viewport=r;this._textDivs=a||[];this._textContentItemsStr=i||[];this._enhanceTextSelection=!!o;this._fontInspectorEnabled=!!globalThis.FontInspector ?. activé;this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability =(0,n.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null);if(this._layoutTextCtx){this._layoutTextCtx.canvas.width=0 ;this._layoutTextCtx.canvas.height=0;this._layoutTextCtx=null}})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this ._canceled=!0;if(this._reader){this._reader.cancel(new n.AbortException("Tâche TextLayer annulée.")).catch((()=>{}));this._reader=null }if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("Tâche TextLayer annulée."))}_processItems(t,e){ for(let s=0,n=t.length;s<n;s++)if(void 0!==t[s].str){this._textContentItemsStr.push(t[s].str);appendText( this,t[s],e,this._layoutTextCtx)}else if("beginMarkedContentProps"===t[s].type||"beginMarkedContent"===t[s].type){const e=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!== t[s].id&&this._container.setAttribute("id",`${t[s].id}`);e.appendChild(this._container)}else"endMarkedContent"===t[s].type&& (this._container=this._container.parentNode)}_layoutText(t){const e=this._textDivProperties.get(t);let s="";if(0!==e.canvasWidth&&e.hasText){const{ fontSize:n,fontFamily:r}=t.style;if(n!==this._layoutTextLastFontSize||r!==this._layoutTextLastFontFamily){this._layoutTextCtx.font=`${n} ${r}`; this._layoutTextLastFontSize=n;this._layoutTextLastFontFamily=r}const{width:a}=this._layoutTextCtx.measureText(t.textContent);if(a>0){const t=e.canvasWidth/a;this._enhanceTextSelection&&( e.échelle=t);s=`scaleX(${t})`}}0!==e.angle&&(s=`rotate(${e.angle}deg) ${s}`);if(s.length>0){ this._enhanceTextSelection&&(e.originalTransform=s);t.style.transform=s}e.hasText&&this._container.appendChild(t);if(e.hasEOL){const t=document.createElement("br");t .setAttribute("role","presentation");this._container.appendChild(t)}}_render(t=0){const e=(0,n.createPromiseCapability)();let s=Object.create(null );const a=this._document.createElement("canvas");a.height=a.width=r;this._layoutTextCtx=a.getContext("2d",{alpha:!1});if(this. _textContent){const t=this._textContent.items,s=this._textContent.styles;this._processItems(t,s);e.resolve()}else{if(!this._textContentStream)lancer une nouvelle erreur('Aucun Paramètres "textContent" ni "textContentStream" spécifiés.');{const pump=()=>{this._reader.read().then((({value:t,done:n})=>{if(n)e.resolve();else{Object.assign( s,t.styles);this._processItems(t.items,s);pump()}}),e.reject)};this._reader=this._textContentStream.getReader();pump()}}e. promesse.then((()=>{s=null;t?this._renderTimer=setTimeout((()=>{render(this);this._renderTimer=null}),t):render(this)}) ,this._capability.reject)}expandTextDivs(t=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;if(null!==this._bounds){expand(this);this._bounds =null}const e=[],s=[];for(let n=0,r=this._textDivs.length;n<r;n++){const r=this._textDivs[n],a=this. _textDivProperties.get(r);if(a.hasText)if(t){e.length=0;s.length=0;a.originalTransform&&e.push(a.originalTransform);if(a.paddingTop>0){ s.push(`${a.paddingTop}px`);e.push(`translateY(${-a.paddingTop}px)`)}else s.push(0);a.paddingRight>0?s.push(a.paddingRight/a.scale+"px") :s.push(0);a.paddingBottom>0?s.push(`${a.paddingBottom}px`):s.push( 0);if(a.paddingLeft>0){s.push(a.paddingLeft/a.scale+"px");e.push(`translateX(${-a.paddingLeft/a.scale}px)`) }else s.push(0);r.style.padding=s.join(" ");e.length&&(r.style.transform=e.join(" "))}else{r.style.padding= null;r.style.transform=a.originalTransform}}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});e.SVGGraphics=void 0;var n=s(1),r=s(5),a=s(3);let i=class{constructor(){(0,n.unreachable)("Non implémenté : SVGGraphics")}} ;e.SVGGraphics=i;{const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace ",c="http://www.w3.org/1999/xlink",h=["bout","rond","carré"],d=["onglet","rond","biseau"],createObjectURL=fonction(t,e="",s=!1){if(URL.createObjectURL&&"undefined" !=typeof Blob&&!s)return URL.createObjectURL(new Blob([t],{type:e}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=`data:${e};base64,` ;for(let e=0,s=t.length;e<s;e+=3){const a=255&t[e],i=255&t[e+1],o=255&t[e+2];r+ =n[a>>2]+n[(3&a)<<4|i>>4]+n[e+1<s?(15&i)<<2|o>>6:64]+n[e +2<s?63&o:64]}return r},u=fonction(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array( 256);pour(laissez t=0;t<256;t++){laissez s=t;pour(laissez t=0;t<8;t++)s=1&s?3988292384^s>>1&2147483647:s>>1&2147483647 ;e[t]=s}fonction writePngChunk(t,s,n,r){soit a=r;const i=s.length;n[a]=i>>24&255;n[a+1]=i>>16&255;n[a+2]=i>>8&255;n [a+3]=255&i;a+=4;n[a]=255&t.charCodeAt(0);n[a+1]=255&t.charCodeAt(1);n[a+2]=255&t.charCodeAt(2 );n[a+3]=255&t.charCodeAt(3);a+=4;n.set(s,a);a+=s.length;const o=function crc32(t,s,n){let r =-1;for(let a=s;a<n;a++){const s=255&(r^t[a]);r=r>>>8^e[s]}return-1^r} (n,r+4,a);n[a]=o>>24&255;n[a+1]=o>>16&255;n[a+2]=o>>8&255;n[a+3] =255&o}fonction deflateSyncUncompressed(t){let e=t.length;const s=65535,n=Math.ceil(e/s),r=new Uint8Array(2+e+5*n+4);let a =0;r[a++]=120;r[a++]=156;let i=0;for(;e>s;){r[a++]=0;r[a++]=255;r[a++]= 255;r[a++]=0;r[a++]=0;r.set(t.subarray(i,i+s),a);a+=s;i+=s;e-=s}r[a++ ]=1;r[a++]=255&e;r[a++]=e>>8&255;r[a++]=255&~e;r[a++]=(65535&~e)>>8&255;r.set(t.subarray(i),a);a+=t.length-i;const o=function adler32(t,e,s){let n=1,r=0;for(let a =e;a<s;++a){n=(n+(255&t[a]))%65521;r=(r+n)%65521}retour r<<16|n}(t,0,t .length);r[a++]=o>>24&255;r[a++]=o>>16&255;r[a++]=o>>8&255;r[a++]=255&o;return r}function encode(e,s ,r,i){const o=e.width,l=e.height;let c,h,d;const u=e.data;switch(s){case n.ImageKind.GRAYSCALE_1BPP:h=0;c =1;d=o+7>>3;break;case n.ImageKind.RGB_24BPP:h=2;c=8;d=3*o;break;case n.ImageKind.RGBA_32BPP:h=6;c= 8;d=4*o;break;default:throw new Error("invalid format")}const p=new Uint8Array((1+d)*l);let f=0,g=0;for(let t =0;t<l;++t){p[f++]=0;p.set(u.subarray(g,g+d),f);g+=d;f+=d}if(s== =n.ImageKind.GRAYSCALE_1BPP&&i){f=0;pour(let t=0;t<l;t++){f++;for(let t=0;t<d;t++)p[f++]^=255}} const m=new Uint8Array([o>>24&255,o>>16&255,o>>8&255,255&o,l>>24&255,l>>16&255,l>>8&255,255&l,c,h,0,0,0]),_=fonction deflateSync(t) {if(!a.isNodeJS)return deflateSyncUncompressed(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const s=require("zlib" ).deflateSync(e,{level:9});return s instanceof Uint8Array?s:new Uint8Array(s)}catch(t){(0,n.warn)("Pas de compression PNG car zlib.deflateSync n'est pas disponible : "+t)}return deflateSyncUncompressed(t)}(p),A=t.length+36+m.length+_.length,b=new Uint8Array(A);let y=0;b.set(t, y);y+=t.length;writePngChunk("IHDR",m,b,y);y+=12+m.length;writePngChunk("IDATA",_,b,y);y+=12+_.length ;writePngChunk("IEND",new Uint8Array(0),b,y);return createObjectURL(b,"image/png",r)}return function convertImgDataToPng(t,e,s){retour encode(t,void 0===t.kind?n.ImageKind.GRAYSCALE_1BPP:t.kind,e,s)}}();class SVGExtraState{constructor(){this.fontSizeScale=1 ;this.fontWeight=o.fontWeight;this.fontSize=0;this.textMatrix=n.IDENTITY_MATRIX;this.fontMatrix=n.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=n.TextRenderingMode.FILL;this.textMatrixScale =1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0 ;this.fillColor=o.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap=""; this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;thiforceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}" ; source : url(${e}); }\n`}setFont(t){const e=this.current,s=this.commonObjs.get(t[0]);let r=t[1];e.font=s;if(this.embedFonts&& !s.missingFile&&!this.embeddedFonts[s.loadedName]){this.addFontStyle(s);this.embeddedFonts[s.loadedName]=s}e.fontMatrix=s.fontMatrix||n.FONT_IDENTITY_MATRIX;let a=" normal";s.black?a="900":s.bold&&(a="bold");const i=s.italic?"italic":"normal";if(r<0){r=-r ;e.fontDirection=-1}else e.fontDirection=1;e.fontSize=r;e.fontFamily=s.loadedName;e.fontWeight=a;e.fontStyle=i;e.tspan=this.svgFactory.createElement ("svg:tspan");e.tspan.setAttributeNS(null,"y",pf(-ey));e.xcoords=[];e.ycoords=[]}endText(){const t=this. courant;if(t.textRenderingMode&
